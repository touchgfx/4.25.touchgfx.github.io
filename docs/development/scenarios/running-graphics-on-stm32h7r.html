<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-development/scenarios/running-graphics-on-stm32h7r" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Running graphics on STM32H7R7 &amp; S7 | TouchGFX Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://support.touchgfx.com/4.25/img/meta-image.png"><meta data-rh="true" name="twitter:image" content="https://support.touchgfx.com/4.25/img/meta-image.png"><meta data-rh="true" property="og:url" content="https://support.touchgfx.com/4.25/docs/development/scenarios/running-graphics-on-stm32h7r"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Running graphics on STM32H7R7 &amp; S7 | TouchGFX Documentation"><meta data-rh="true" name="description" content="This article addresses the specific architecture of the STM32H7R/S series MCUs and discusses the required considerations when using it for graphics. However, most of these considerations are applicable to all STM32 MCUs running graphics with external RAM and flash."><meta data-rh="true" property="og:description" content="This article addresses the specific architecture of the STM32H7R/S series MCUs and discusses the required considerations when using it for graphics. However, most of these considerations are applicable to all STM32 MCUs running graphics with external RAM and flash."><link data-rh="true" rel="icon" href="/4.25/img/favicon.png"><link data-rh="true" rel="canonical" href="https://support.touchgfx.com/4.25/docs/development/scenarios/running-graphics-on-stm32h7r"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/docs/development/scenarios/running-graphics-on-stm32h7r" hreflang="en"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/ko/docs/development/scenarios/running-graphics-on-stm32h7r" hreflang="ko"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/ja/docs/development/scenarios/running-graphics-on-stm32h7r" hreflang="ja"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/zh-CN/docs/development/scenarios/running-graphics-on-stm32h7r" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/zh-TW/docs/development/scenarios/running-graphics-on-stm32h7r" hreflang="zh-TW"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/docs/development/scenarios/running-graphics-on-stm32h7r" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://B8LNOI0XWD-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="TouchGFX Documentation" href="/4.25/opensearch.xml">


<script src="/4.25/js/one-trust.js"></script>
<script src="/4.25/js/fix-location.js"></script><link rel="stylesheet" href="/4.25/assets/css/styles.6e57ba1f.css">
<link rel="preload" href="/4.25/assets/js/runtime~main.43b19a50.js" as="script">
<link rel="preload" href="/4.25/assets/js/main.091fac9a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><div role="region" aria-label="Skip to main content"><a class="skipToContent_xAYN" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/4.25/docs/introduction/welcome"><div class="navbar__logo"><img src="/4.25/img/logo.svg" alt="TouchGFX" class="themedImage_m0dh themedImage--light_OZkp"><img src="/4.25/img/logo.svg" alt="TouchGFX" class="themedImage_m0dh themedImage--dark_ViMM"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/4.25/docs/introduction/welcome">Docs</a><a class="navbar__item navbar__link" href="/4.25/docs/api/namespacetouchgfx">API</a><a class="navbar__item navbar__link" sidebarid="academy" href="/4.25/academy/academy-introduction">TouchGFX Academy</a><a href="https://community.st.com/s/topic/0TO0X0000003iw6WAA/touchgfx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/4.25/docs/introduction/welcome">4.25</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/4.25/docs/development/scenarios/running-graphics-on-stm32h7r">4.25</a></li><li><a href="https://support.touchgfx.com/4.25" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.25<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.24" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.24<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.23" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.23<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.22" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.22<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.21" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.21<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.20" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.20<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.19" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.19<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.18" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.18<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.17" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.17<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.16" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.16<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.15" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.15<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.14" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.14<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.13" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.13<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">English</a><ul class="dropdown__menu"><li><a href="/4.25/docs/development/scenarios/running-graphics-on-stm32h7r" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/4.25/ko/docs/development/scenarios/running-graphics-on-stm32h7r" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ko">한국어</a></li><li><a href="/4.25/ja/docs/development/scenarios/running-graphics-on-stm32h7r" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja">日本語</a></li><li><a href="/4.25/zh-CN/docs/development/scenarios/running-graphics-on-stm32h7r" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-CN">简体中文</a></li><li><a href="/4.25/zh-TW/docs/development/scenarios/running-graphics-on-stm32h7r" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-TW">繁體中文</a></li></ul></div><div class="searchBox_y6an"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_ovZa docsWrapper_a09d"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_PCdr" type="button"></button><div class="docPage_CL8Z"><aside class="theme-doc-sidebar-container docSidebarContainer_ThtD"><div class="sidebarViewport_mAJy"><div class="sidebar_Oq1e"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_M44W"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.25/docs/category/introduction">Introduction</a><button aria-label="Toggle the collapsible sidebar category &#x27;Introduction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.25/docs/category/basic-concepts">Basic Concepts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Basic Concepts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/4.25/docs/development/development-introduction">Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;Development&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.25/docs/development/hardware-selection/hardware-selection-introduction">Hardware Selection</a><button aria-label="Toggle the collapsible sidebar category &#x27;Hardware Selection&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.25/docs/development/board-bring-up/board-introduction">Board Bring Up</a><button aria-label="Toggle the collapsible sidebar category &#x27;Board Bring Up&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.25/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction">TouchGFX AL Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;TouchGFX AL Development&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.25/docs/development/ui-development/ui-development-introduction">UI Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;UI Development&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/4.25/docs/category/scenarios-2">Scenarios</a><button aria-label="Toggle the collapsible sidebar category &#x27;Scenarios&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/docs/development/scenarios/touchgfx-on-lowcost-hardware">TouchGFX on Low Cost Hardware</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/docs/development/scenarios/touchgfx-on-gpu2d">TouchGFX on NeoChrom/NeoChromVG</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/4.25/docs/development/scenarios/running-graphics-on-stm32h7r">Running graphics on STM32H7R7 &amp; S7</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/docs/development/scenarios/running-graphics-from-external-ram">Running graphics from external RAM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/docs/development/scenarios/lowering-memory-usage-with-partial-framebuffer">Lowering Memory Usage with Partial Framebuffer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/docs/flash-limited">Flash-limited GUI development</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/docs/development/scenarios/using-non-memory-mapped-flash">Using Non-Memory Mapped Flash for Storing Images</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/docs/development/scenarios/using-serial-flash">Using Serial Flash for images and fonts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/docs/development/scenarios/fonts-in-unmapped-flash">Using Non-Memory Mapped Flash for Font Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/docs/development/scenarios/scenarios-change-pixelformat-bpp">Changing the Pixel Format of an Application</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/docs/development/scenarios/scenarios-create-at">Creating a TouchGFX Board Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/docs/development/scenarios/example-gpio">External Events as Triggers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/docs/development/scenarios/running-without-rtos">Running without an RTOS on a TouchGFX Board Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/docs/development/scenarios/adding-files-to-stm32cubemx-projet">Adding files to STM32CubeMX project</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/docs/development/scenarios/converting-keil5-project-to-keil6">Converting a Keil compiler 5 project to Keil compiler 6</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/docs/development/scenarios/cmake-as-build-system">CMake as build system</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.25/docs/category/miscellaneous-1">Miscellaneous</a><button aria-label="Toggle the collapsible sidebar category &#x27;Miscellaneous&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.25/docs/category/resources">Resources</a><button aria-label="Toggle the collapsible sidebar category &#x27;Resources&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_fxxJ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_QTf6"><div id="doc-version-banner-identifier" class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->TouchGFX<!-- --> <b>4.25</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="https://support.touchgfx.com/docs/development/scenarios/running-graphics-on-stm32h7r" target="_blank" rel="noopener noreferrer">latest version</a></b>.</div></div><div class="docItemContainer_yTh1"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer__o78" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.25/docs/development/development-introduction"><span itemprop="name">Development</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.25/docs/category/scenarios-2"><span itemprop="name">Scenarios</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Running graphics on STM32H7R7 &amp; S7</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_CArF theme-doc-toc-mobile tocMobile_PMGv"><button type="button" class="clean-btn tocCollapsibleButton_I8Hj">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Running graphics on STM32H7R7 &amp; S7</h1></header><p>This article addresses the specific architecture of the STM32H7R/S series MCUs and discusses the required considerations when using it for graphics. However, most of these considerations are applicable to all STM32 MCUs running graphics with external RAM and flash.</p><p>The article is not a beginner’s guide on how to create TouchGFX Board Setups (TBSs), as the STM32H7R/S is a high-performance and hence advanced MCU. Therefore, the article will also only dive into areas specific and important to STM32H7R/S. For a general introduction on how to create TouchGFX TBSs, refer to the <a href="/4.25/docs/development/board-bring-up/board-introduction">Board Bring Up guide</a>.<br>
<!-- -->For more information on the STM32H7R7/S7 please visit the <a href="https://www.st.com/en/microcontrollers-microprocessors/stm32h7r7-7s7.html" target="_blank" rel="noopener noreferrer">product page</a> or the <a href="https://www.youtube.com/playlist?list=PLnMKNibPkDnF2fL7nhQ08V0bPi2poXVpH" target="_blank" rel="noopener noreferrer">YouTube playlist containing a full STM32H7RS demo workshop</a>.</p><p>TouchGFX Designer contains a TBS for STM32H7S78 DK, which is a complete example project of running TouchGFX on STM32H7R/S. The TBS can be used as reference when developing a TouchGFX application for STM32H7R/S. The project is based on STM32CubeMX, which means the recommended configuration for cache, MPU, external memory, etc. can be accessed by opening the STM32H7S78-DK.ioc file.</p><div class="figure"><a href="/4.25/img/development/scenarios/running-graphics-on-stm32h7r/stm32h7s-tbs.png" target="_blank"><img src="/4.25/img/development/scenarios/running-graphics-on-stm32h7r/stm32h7s-tbs.png"></a><p>TouchGFX Board Setup available in TouchGFX Designer</p></div><h2 class="anchor anchorWithStickyNavbar_k1OW" id="memory-setup">Memory setup<a href="#memory-setup" class="hash-link" aria-label="Direct link to Memory setup" title="Direct link to Memory setup">​</a></h2><p>STM32H7R/S is a bootflash MCU. A bootflash MCU is an MCU with a small embedded flash that contains the bootloader, while the main application is placed in external memory along with assets. STM32H7R/S also has 620 kB of embedded SRAM. As a result, STM32H7R/S relies on both external RAM and flash when used for graphics applications. When using external memories for graphics, the memory bandwidth to the external memories will often be the bottleneck since they run at half or a third of the CPU frequency.
In the case of STM32H7R7/S7 the two XSPI (16 and 8 bit) interfaces can run at up to 200 MHz in double transfer rate and the FMC (16 or 32 bit) can run at up to 100 MHz.</p><h3 class="anchor anchorWithStickyNavbar_k1OW" id="external-memory-manager">External Memory Manager<a href="#external-memory-manager" class="hash-link" aria-label="Direct link to External Memory Manager" title="Direct link to External Memory Manager">​</a></h3><p>Two tools called External Memory Manager and External Memory Loader are available from STM32CubeMX under Categories → Middleware and Software Packs. These tools are created to assist the user in setting up the external memories in bootflash or flashless applications. The tools make it easier to create external loaders and e.g. select application type. An introduction to the tools can be found <a href="https://wiki.st.com/stm32mcu/wiki/Getting_started_with_External_memory_Manager_and_External_memory_loader" target="_blank" rel="noopener noreferrer">here</a>.
A new article called &#x27;&#x27;Introduction to external serial memory with STM32&#x27;&#x27; will soon be published.</p><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content"><p><a href="https://wiki.st.com/stm32mcu/wiki/Getting_started_with_External_memory_Manager_and_External_memory_loader" target="_blank" rel="noopener noreferrer">Getting started with External Memory Manager and External Memory Loader</a></p></div></div><h3 class="anchor anchorWithStickyNavbar_k1OW" id="framebuffers-in-external-ram">Framebuffers in external RAM<a href="#framebuffers-in-external-ram" class="hash-link" aria-label="Direct link to Framebuffers in external RAM" title="Direct link to Framebuffers in external RAM">​</a></h3><p>The first and most important thing to consider when having framebuffers in external RAM is the memory bandwidth requirements and constraints. With a display with no GRAM, it is required to continuously transfer the framebuffer at the specified rate by the display. For the displays used on the discovery kits, this is 60 Hz. This means that a lot of bandwidth on the external RAM interface will be occupied with only updating the LTDC.
The required bandwidth by the LTDC can be calculated as follows:</p><p>pixel clock = LCD_CLK= total screen size <!-- -->*<!-- --> refresh rate<br>
<!-- -->Required bandwith(for one LTDC layer) = LCD_CLK <!-- -->*<!-- --> Bpp</p><p>Furthermore, DMA2D and GPU2D will also require bandwidth on the external RAM when performing operations on the framebuffers. If the memory is also used for something else, such as application code, this will decrease the bandwidth even further.<br>
<!-- -->Combined, these factors can clutter the external RAM bus.</p><p>An article explaining considerations when running graphics with framebuffers in external RAM can be found <a href="/4.25/docs/development/scenarios/running-graphics-from-external-ram">here</a>.</p><p>For further information on constraints and considerations when having an LTDC display interface and framebuffers in external RAM, refer to the <a href="https://www.st.com/resource/en/application_note/an4861-introduction-to-lcdtft-display-controller-ltdc-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">LTDC application note</a>. Pay special attention to chapter 5: “Creating a graphical application with LTDC” and chapter 7: “LTDC application examples”.<br>
<!-- -->If the bandwidth on the external RAM is at its limit, consider chapter 5.5.2: “Optimizing the LTDC framebuffer fetching from external memories” and chapter 5.5.3: “Optimizing the LTDC framebuffer fetching from SDRAM”.</p><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content"><ul><li><a href="/4.25/docs/development/scenarios/running-graphics-from-external-ram">Running graphics from external RAM</a></li><li><a href="https://www.st.com/resource/en/application_note/an4861-introduction-to-lcdtft-display-controller-ltdc-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">AN4861: Introduction to LCD-TFT display controller (LTDC) on STM32 MCUs</a></li></ul></div></div><h3 class="anchor anchorWithStickyNavbar_k1OW" id="tightly-coupled-memory">Tightly coupled memory<a href="#tightly-coupled-memory" class="hash-link" aria-label="Direct link to Tightly coupled memory" title="Direct link to Tightly coupled memory">​</a></h3><p>The STM32H7R/S Cortex-M7 features a 64-bit wide direct access to tightly coupled memories (TCM) with zero wait state. It has up to 192 kB of both data TCM (DTCM) and instruction TCM (ITCM). The DTCM and ITCM are hence the best locations for read/write of data and instruction fetch respectively.
Therefore, the ITCM should be used for critical code with deterministic execution, such as interrupt handlers that cannot wait for cache misses, as well as e.g. critical control loops.
In real-time applications that use RTOS, the heap is generally massively used. It is therefore recommended to place the RTOS stack and heap in DTCM. If there is any space left, global variables could be placed here as well.</p><p>It is important to note that ITCM and DTCM are using some parts of the SRAM1 and SRAM3 memories. This implies that the size of the internal SRAM will shrink when using ITCM and DTCM.</p><div class="figure"><a href="/4.25/img/development/scenarios/running-graphics-on-stm32h7r/tcm-illustration.png" target="_blank"><img src="/4.25/img/development/scenarios/running-graphics-on-stm32h7r/tcm-illustration.png"></a><p>Illustration of the tightly coupled memory on STM32H7R/S</p></div><p>Like other H7 MCUs, STM32H7R/S has Level 1 (L1) cache. For more information on L1 cache, refer to the <a href="https://www.st.com/resource/en/application_note/an4839-level-1-cache-on-stm32f7-series-and-stm32h7-series-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">H7 cache application note</a>. Pay special attention to chapter 4: “Mistakes to avoid and tips”.</p><p>For a detailed description of how to setup external SPI memories, refer to <a href="https://www.st.com/resource/en/application_note/an5050-getting-started-with-octospi-hexadecaspi-and-xspi-interface-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">OSPI, HSPI and XSPI application note</a>.</p><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content"><ul><li><a href="https://www.st.com/resource/en/application_note/an6062-introduction-to-stm32h7rx7sx-system-architecture-and-performance-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">AN6062: Introduction to STM32H7Rx/7Sx system architecture and performance</a></li><li><a href="https://www.st.com/resource/en/application_note/an4839-level-1-cache-on-stm32f7-series-and-stm32h7-series-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">AN4839: Level 1 cache on STM32F7 Series and STM32H7 Series</a></li><li><a href="https://www.st.com/resource/en/application_note/an5050-getting-started-with-octospi-hexadecaspi-and-xspi-interface-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">AN5050: Getting started with Octo-SPI, Hexadeca-SPI, and XSPI interfaces
on STM32 MCUs</a>.</li></ul></div></div><h2 class="anchor anchorWithStickyNavbar_k1OW" id="application-type">Application type<a href="#application-type" class="hash-link" aria-label="Direct link to Application type" title="Direct link to Application type">​</a></h2><p>During startup, the bootloader can do different things depending on the selected application type. It can either point to the application already in place in the external flash, or load the application to another memory, typically external RAM.<br>
<!-- -->Executing the application already in place in external flash is called execute-in-place (XiP). Copying the application from flash to RAM during boot and then executing from RAM is called load-and-run (LRUN).</p><p>If the application is encrypted, it is only possible to use LRUN. For further information on encryption on STM32, refer to the <a href="https://www.st.com/resource/en/application_note/an6088-how-to-use-mce-for-encryptiondecryption-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">application note on encryption</a>.</p><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content"><p><a href="https://www.st.com/resource/en/application_note/an6088-how-to-use-mce-for-encryptiondecryption-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">AN6088: How to use MCE for encryption/decryption on STM32 MCUs</a></p></div></div><h3 class="anchor anchorWithStickyNavbar_k1OW" id="execute-in-place-xip">Execute in Place (XiP)<a href="#execute-in-place-xip" class="hash-link" aria-label="Direct link to Execute in Place (XiP)" title="Direct link to Execute in Place (XiP)">​</a></h3><p>An example of how the memory layout for XiP could look like for a graphics application is illustrated below. XiP is the default application type.</p><div class="figure"><a href="/4.25/img/development/scenarios/running-graphics-on-stm32h7r/xip-illustration.png" target="_blank"><img src="/4.25/img/development/scenarios/running-graphics-on-stm32h7r/xip-illustration.png"></a><p>Illustration of XiP application for graphics</p></div><p>As shown in the XiP illustration, the OctoSPI interface to the external flash is used to access both application code and graphics assets. The CPU constantly accesses the application code, which can lead to slower access times for NeoChrom GPU or Chrom-ART when accessing the assets. This will negatively impact graphics performance.
To mitigate this challenge, it is highly recommended to enable the instruction cache for external flash when running XiP. By doing so, repeated instructions will be read from the cache instead of the external flash, thereby reducing the load on the bandwidth and increasing the efficiency of the external flash interface.</p><h3 class="anchor anchorWithStickyNavbar_k1OW" id="load-and-run-lrun">Load and Run (LRUN)<a href="#load-and-run-lrun" class="hash-link" aria-label="Direct link to Load and Run (LRUN)" title="Direct link to Load and Run (LRUN)">​</a></h3><p>A corresponding example for LRUN is illustrated below.</p><div class="figure"><a href="/4.25/img/development/scenarios/running-graphics-on-stm32h7r/lrun-illustration.png" target="_blank"><img src="/4.25/img/development/scenarios/running-graphics-on-stm32h7r/lrun-illustration.png"></a><p>Illustration of LRUN application for graphics</p></div><p>As shown in the LRUN illustration, the application code is now separated from the graphics assets, which improves the access of assets. However, this also means that it is now the interface to the external RAM, which will be loaded, since it is needed to access both framebuffers and application code. In this case, it is highly recommended to enable instruction cache on the external RAM interface.</p><p>When using LRUN on STM32H7R/S with a graphics application, there are a few extra things to consider to achieve the best possible performance.<br>
<!-- -->First, consider if the assets (bitmaps, fonts, etc.) could be kept in external flash. Since the assets are accessed frequently, storing them in external RAM will significantly load the bandwidth of the external RAM. Furthermore, it is typically unnecessary to encrypt assets.<br>
<!-- -->Secondly, it is worth investigating if the application code will fit in internal SRAM as illustrated below. The application code can be accessed and executed even faster from internal SRAM compared to having it in external flash or external RAM, as the internal buses are faster. The AXI bus on STM32H7R/S, to which the internal SRAM is connected, can run at speeds of up to 300 MHz. Furthermore, this configuration allows assets, framebuffers, and application code to be placed in three different locations, thereby distributing the bandwidth load across three separate buses.</p><div class="figure"><a href="/4.25/img/development/scenarios/running-graphics-on-stm32h7r/lrun-intram-illustration.png" target="_blank"><img src="/4.25/img/development/scenarios/running-graphics-on-stm32h7r/lrun-intram-illustration.png"></a><p>Illustration of LRUN application for graphics with application code in internal RAM</p></div><h3 class="anchor anchorWithStickyNavbar_k1OW" id="performance-comparison">Performance comparison<a href="#performance-comparison" class="hash-link" aria-label="Direct link to Performance comparison" title="Direct link to Performance comparison">​</a></h3><p>Below are examples of complex GUIs using XiP and LRUN respectively. The LRUN application has the application code in internal SRAM. The comparison shows how the MCU load is impacted by the different configurations. By placing the TouchGFX framework and application into the internal SRAM, the number of cycles for fetching in external RAM and flash is reduced, which effectively decreases the MCU load.<br>
<!-- -->Demo reference is the out-of-box demo running on STM32H7S78-DK. </p><div class="figure"><a href="/4.25/img/development/scenarios/running-graphics-on-stm32h7r/lrun-xip-comparison.png" target="_blank"><img src="/4.25/img/development/scenarios/running-graphics-on-stm32h7r/lrun-xip-comparison.png"></a><p>Comparison of MCU load for LRUN and XiP application</p></div><p>The comparison shows that the MCU load is reduced when the application code is placed in internal SRAM. The MCU load is reduced by approximately 50% when using LRUN compared to XiP.</p><p>The comparison shows that the MCU load is significantly reduced when the application code is placed in internal SRAM. This is due to the faster access times of the internal SRAM compared to external RAM and flash. The MCU load is reduced by 50% when using LRUN with the application code in internal SRAM compared to XiP.
Using LRUN with application code stored in internal SRAM offers the best performance. However, this configuration is only feasible when the application code fits within the available internal SRAM.</p><h2 class="anchor anchorWithStickyNavbar_k1OW" id="mpu-configuration">MPU configuration<a href="#mpu-configuration" class="hash-link" aria-label="Direct link to MPU configuration" title="Direct link to MPU configuration">​</a></h2><p>The memory protection unit (MPU) is used to protect memory areas from unintended memory access and -execution.<br>
<!-- -->On Arm® Cortex®-M7 processors, it is important to prevent speculative access as it may cause high latency or system errors when performed on external memories. For STM32H7R/S, this will impact the AXI masters accessing the memories and it will significantly decrease graphics performance.<br>
<!-- -->The MPU can be used to prevent speculative read access, by controlling the accessible address ranges. The easiest way to do this is by using a background region with the entire memory area, which restricts access by setting it to “strongly ordered, execute never”. </p><p>The background region should be defined in the default region with ID -1 since all other regions will then have priority over this region. Then, other MPU regions with respective settings should be defined for the memory areas that need access. It is possible to define up to 16 regions on STM32H7R/S.</p><p>The MPU configuration from the STM32H7S78 DK TBS is inserted below. This configuration can be used as reference.</p><table><thead><tr><th><strong>Region 0</strong></th><th><strong>All</strong></th><th><strong>Note</strong></th></tr></thead><tbody><tr><td><em>Attribute</em></td><td><em>Value</em></td><td></td></tr><tr><td>MPU Region Base Address</td><td>0x0</td><td></td></tr><tr><td>MPU Region Size</td><td>4 GB</td><td>Covers the entire memory area of the MCU</td></tr><tr><td>MPU SubRegion Disable</td><td>0x0</td><td></td></tr><tr><td>MPU TEX field level</td><td>Level 0</td><td></td></tr><tr><td>MPU Access Permission</td><td>ALL ACCESS NOT PERMITTED</td><td>Restrict all access</td></tr><tr><td>MPU Instruction Access</td><td>DISABLE</td><td></td></tr><tr><td>MPU Shareability Permission</td><td>ENABLE</td><td></td></tr><tr><td>MPU Cacheable Permission</td><td>DISABLE</td><td></td></tr><tr><td>MPU Bufferable Permission</td><td>DISABLE</td><td></td></tr></tbody></table><table><thead><tr><th><strong>Region 1</strong></th><th><strong>External flash</strong></th><th><strong>Note</strong></th></tr></thead><tbody><tr><td><em>Attribute</em></td><td><em>Value</em></td><td></td></tr><tr><td>MPU Region Base Address</td><td>0x70000000</td><td>Base address of XSPI2 (external flash)</td></tr><tr><td>MPU Region Size</td><td>128 MB</td><td>128 MBytes external flash on the board</td></tr><tr><td>MPU SubRegion Disable</td><td>0x0</td><td></td></tr><tr><td>MPU TEX field level</td><td>Level 1</td><td></td></tr><tr><td>MPU Access Permission</td><td>ALL ACCESS PERMITTED</td><td></td></tr><tr><td>MPU Instruction Access</td><td>DISABLE</td><td></td></tr><tr><td>MPU Shareability Permission</td><td>DISABLE</td><td></td></tr><tr><td>MPU Cacheable Permission</td><td>ENABLE</td><td></td></tr><tr><td>MPU Bufferable Permission</td><td>ENABLE</td><td></td></tr></tbody></table><table><thead><tr><th><strong>Region 2</strong></th><th><strong>External flash</strong></th><th><strong>Note</strong></th></tr></thead><tbody><tr><td><em>Attribute</em></td><td><em>Value</em></td><td></td></tr><tr><td>MPU Region</td><td>Enabled</td><td></td></tr><tr><td>MPU Region Base Address</td><td>0x70000000</td><td>Base address of XSPI2 (external flash)</td></tr><tr><td>MPU Region Size</td><td>2 MB</td><td>Properties for the first 2 MB of the external flash, where application code is placed, is overwritten</td></tr><tr><td>MPU SubRegion Disable</td><td>0x0</td><td></td></tr><tr><td>MPU TEX field level</td><td>Level 1</td><td></td></tr><tr><td>MPU Access Permission</td><td>ALL ACCESS PERMITTED</td><td></td></tr><tr><td>MPU Instruction Access</td><td>ENABLE</td><td></td></tr><tr><td>MPU Shareability Permission</td><td>DISABLE</td><td></td></tr><tr><td>MPU Cacheable Permission</td><td>ENABLE</td><td></td></tr><tr><td>MPU Bufferable Permission</td><td>ENABLE</td><td></td></tr></tbody></table><table><thead><tr><th><strong>Region 3</strong></th><th><strong>External PSRAM</strong></th><th><strong>Note</strong></th></tr></thead><tbody><tr><td><em>Attribute</em></td><td><em>Value</em></td><td></td></tr><tr><td>MPU Region Base Address</td><td>0x90000000</td><td>Base address of XSPI1 (external PSRAM)</td></tr><tr><td>MPU Region Size</td><td>32 MB</td><td>32 MBytes external PSRAM on the board</td></tr><tr><td>MPU SubRegion Disable</td><td>0x0</td><td></td></tr><tr><td>MPU TEX field level</td><td>Level 1</td><td></td></tr><tr><td>MPU Access Permission</td><td>ALL ACCESS PERMITTED</td><td></td></tr><tr><td>MPU Instruction Access</td><td>DISABLE</td><td></td></tr><tr><td>MPU Shareability Permission</td><td>DISABLE</td><td></td></tr><tr><td>MPU Cacheable Permission</td><td>DISABLE</td><td></td></tr><tr><td>MPU Bufferable Permission</td><td>DISABLE</td><td></td></tr></tbody></table><table><thead><tr><th><strong>Region 4</strong></th><th><strong>DTCM</strong></th><th><strong>Note</strong></th></tr></thead><tbody><tr><td><em>Attribute</em></td><td><em>Value</em></td><td></td></tr><tr><td>MPU Region Base Address</td><td>0x20000000</td><td>Base address of DTCM</td></tr><tr><td>MPU Region Size</td><td>64 kB</td><td>Default 64 kB of DTCM</td></tr><tr><td>MPU SubRegion Disable</td><td>0x0</td><td></td></tr><tr><td>MPU TEX field level</td><td>Level 1</td><td></td></tr><tr><td>MPU Access Permission</td><td>ALL ACCESS PERMITTED</td><td></td></tr><tr><td>MPU Instruction Access</td><td>DISABLE</td><td></td></tr><tr><td>MPU Shareability Permission</td><td>DISABLE</td><td></td></tr><tr><td>MPU Cacheable Permission</td><td>DISABLE</td><td>Disable caching on DTCM, since it does not yield performance increase</td></tr><tr><td>MPU Bufferable Permission</td><td>DISABLE</td><td></td></tr></tbody></table><table><thead><tr><th><strong>Region 5</strong></th><th><strong>SRAM</strong></th><th><strong>Note</strong></th></tr></thead><tbody><tr><td><em>Attribute</em></td><td><em>Value</em></td><td></td></tr><tr><td>MPU Region Base Address</td><td>0x24000000</td><td>Base address of SRAM1</td></tr><tr><td>MPU Region Size</td><td>512 kB</td><td>Covers SRAM1, SRAM2, SRAM3 and SRAM4</td></tr><tr><td>MPU SubRegion Disable</td><td>0x0</td><td></td></tr><tr><td>MPU TEX field level</td><td>Level 1</td><td></td></tr><tr><td>MPU Access Permission</td><td>ALL ACCESS PERMITTED</td><td></td></tr><tr><td>MPU Instruction Access</td><td>DISABLE</td><td></td></tr><tr><td>MPU Shareability Permission</td><td>ENABLE</td><td></td></tr><tr><td>MPU Cacheable Permission</td><td>ENABLE</td><td></td></tr><tr><td>MPU Bufferable Permission</td><td>ENABLE</td><td></td></tr></tbody></table><table><thead><tr><th><strong>Region 6</strong></th><th><strong>GPU2D command list</strong></th><th><strong>Note</strong></th></tr></thead><tbody><tr><td><em>Attribute</em></td><td><em>Value</em></td><td></td></tr><tr><td>MPU Region Base Address</td><td>0x2406e000</td><td>NeoChrom GPU command list is placed here</td></tr><tr><td>MPU Region Size</td><td>16 kB</td><td>Default size of NeoChrom GPU command list when using TouchGFX (defined in nema_hal.c)</td></tr><tr><td>MPU SubRegion Disable</td><td>0x0</td><td></td></tr><tr><td>MPU TEX field level</td><td>Level 0</td><td></td></tr><tr><td>MPU Access Permission</td><td>ALL ACCESS PERMITTED</td><td></td></tr><tr><td>MPU Instruction Access</td><td>DISABLE</td><td></td></tr><tr><td>MPU Shareability Permission</td><td>ENABLE</td><td></td></tr><tr><td>MPU Cacheable Permission</td><td>DISABLE</td><td>Disable caching on command list</td></tr><tr><td>MPU Bufferable Permission</td><td>ENABLE</td><td></td></tr></tbody></table><p>For general graphics-specific MPU configuration tips, refer to chapter 5.6.2: “Configure the memory protection unit (MPU)” in the <a href="https://www.st.com/resource/en/application_note/an4861-introduction-to-lcdtft-display-controller-ltdc-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">LTDC application note</a>.</p><p>For further reference, see the <a href="https://www.st.com/resource/en/application_note/an4838-introduction-to-memory-protection-unit-management-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">MPU application note</a>. Pay special attention to chapter 3: “Cortex-M0+/M3/M4/M7 memory types, registers and attributes” and chapter 6: “MPU setting example with STM32Cube HAL on Armv6 and Armv7 Architectures”.</p><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content"><ul><li><a href="https://www.st.com/resource/en/application_note/an4861-introduction-to-lcdtft-display-controller-ltdc-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">AN4861: Introduction to LCD-TFT display controller (LTDC) on STM32 MCUs</a></li><li><a href="https://www.st.com/resource/en/application_note/an4838-introduction-to-memory-protection-unit-management-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">AN4838: Introduction to memory protection unit management on STM32 MCUs</a></li></ul></div></div><h2 class="anchor anchorWithStickyNavbar_k1OW" id="debugging">Debugging<a href="#debugging" class="hash-link" aria-label="Direct link to Debugging" title="Direct link to Debugging">​</a></h2><p>The following guide to debugging STM32H7R/S in STM32CubeIDE is available in the readme in the TBS available in TouchGFX Designer.</p><p>Debugging the code in an IDE can be complex because of the Bootloader and Application structure of the TBS for STM32H7S78-DK. To step through the code of the TouchGFX application in STM32CubeIDE, follow these steps:</p><ol><li>Generate code in TouchGFX Designer</li><li>Open the project in STM32CubeIDE</li><li>Launch a debug session for the Boot project</li><li>Wait for the compilation and flashing to complete</li><li>Terminate the debug session (Ctrl + F2)</li><li>Launch a debug session for the Appli project</li><li>Wait for the compilation and flashing to complete</li><li>Click Resume (F8)</li><li>Press the black NRST button on the STM32H7S78-DK board</li><li>The application is now at a break point at the first line of main() in the Appli project. If not, click Resume (F8) once more</li><li>Proceed by e.g. clicking Resume (F8) or Step Over (F6)</li></ol><p>For further information on debugging, refer to the wiki page on <a href="https://wiki.stmicroelectronics.cn/stm32mcu/wiki/Security:How_to_start_with_DA_access_on_STM32H7RS" target="_blank" rel="noopener noreferrer">How to start with DA access on STM32H7RS</a>.</p><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content"><p><a href="https://wiki.stmicroelectronics.cn/stm32mcu/wiki/Security:How_to_start_with_DA_access_on_STM32H7RS" target="_blank" rel="noopener noreferrer">How to start with DA access on STM32H7RS</a></p></div></div><h2 class="anchor anchorWithStickyNavbar_k1OW" id="conclusion-and-general-recommendations-for-graphics-applications">Conclusion and general recommendations for graphics applications<a href="#conclusion-and-general-recommendations-for-graphics-applications" class="hash-link" aria-label="Direct link to Conclusion and general recommendations for graphics applications" title="Direct link to Conclusion and general recommendations for graphics applications">​</a></h2><p>As explained above, there are several considerations to be made when developing a graphics application for STM32H7R/S. However, by keeping these considerations in mind, it is possible to achieve great graphics performance due to the fast CPU and the powerful GPU2D.</p><p>First of all, it is very important to be aware of the bandwidth on the external memory buses. This applies to all MCUs that are used with external RAM and flash, but it is especially crucial to consider due to the bootflash structure of STM32H7R/S.</p><p>The performance can be significantly increased by placing critical instructions and data in the ITCM and DTCM memory.</p><p>Enable the L1 instruction and data cache integrated into the Arm® Cortex®-M7 processor as this will boost the performance as well.</p><p>Choose whether to run either XiP or LRUN based on application requirements but remember to be aware of memory bandwidth. If the application code can fit in internal SRAM, LRUN will be the best performing.</p><p>It is important to avoid speculative read access as this will potentially decrease performance quite significantly. This is done by applying appropriate MPU configurations to all memory regions.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/4.25/docs/development/scenarios/touchgfx-on-gpu2d"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">TouchGFX on NeoChrom/NeoChromVG</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/4.25/docs/development/scenarios/running-graphics-from-external-ram"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Running graphics from external RAM</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_cuXu thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#memory-setup" class="table-of-contents__link toc-highlight">Memory setup</a><ul><li><a href="#external-memory-manager" class="table-of-contents__link toc-highlight">External Memory Manager</a></li><li><a href="#framebuffers-in-external-ram" class="table-of-contents__link toc-highlight">Framebuffers in external RAM</a></li><li><a href="#tightly-coupled-memory" class="table-of-contents__link toc-highlight">Tightly coupled memory</a></li></ul></li><li><a href="#application-type" class="table-of-contents__link toc-highlight">Application type</a><ul><li><a href="#execute-in-place-xip" class="table-of-contents__link toc-highlight">Execute in Place (XiP)</a></li><li><a href="#load-and-run-lrun" class="table-of-contents__link toc-highlight">Load and Run (LRUN)</a></li><li><a href="#performance-comparison" class="table-of-contents__link toc-highlight">Performance comparison</a></li></ul></li><li><a href="#mpu-configuration" class="table-of-contents__link toc-highlight">MPU configuration</a></li><li><a href="#debugging" class="table-of-contents__link toc-highlight">Debugging</a></li><li><a href="#conclusion-and-general-recommendations-for-graphics-applications" class="table-of-contents__link toc-highlight">Conclusion and general recommendations for graphics applications</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">All rights reserved © 2024 STMicroelectronics | <a href="https://www.st.com/content/st_com/en/common/terms-of-use.html">Terms of use</a> | <a href="https://www.st.com/content/st_com/en/common/privacy-policy.html">Privacy Policy</a> | <a href="https://app-de.onetrust.com/app/#/webform/2b87200d-4023-4588-9df7-ab0cdea1a67e">Exercise your rights</a></div></div></div></footer></div></div>
<script src="/4.25/assets/js/runtime~main.43b19a50.js"></script>
<script src="/4.25/assets/js/main.091fac9a.js"></script>
</body>
</html>