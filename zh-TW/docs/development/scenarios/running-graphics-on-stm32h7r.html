<!doctype html>
<html lang="zh-TW" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-development/scenarios/running-graphics-on-stm32h7r" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">在 STM32H7R7 與 S7 上執行圖形處理 | TouchGFX Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://support.touchgfx.com/4.25/zh-TW/img/meta-image.png"><meta data-rh="true" name="twitter:image" content="https://support.touchgfx.com/4.25/zh-TW/img/meta-image.png"><meta data-rh="true" property="og:url" content="https://support.touchgfx.com/4.25/zh-TW/docs/development/scenarios/running-graphics-on-stm32h7r"><meta data-rh="true" name="docusaurus_locale" content="zh-TW"><meta data-rh="true" name="docsearch:language" content="zh-TW"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="在 STM32H7R7 與 S7 上執行圖形處理 | TouchGFX Documentation"><meta data-rh="true" name="description" content="本文介紹 STM32H7R/S 系列 MCU 的具體架構，並討論用於圖形應用時需要考慮的事項。 然而，大部分考量都適用於所有執行含外部 RAM 和快閃記憶體圖形處理的 STM32 MCU。"><meta data-rh="true" property="og:description" content="本文介紹 STM32H7R/S 系列 MCU 的具體架構，並討論用於圖形應用時需要考慮的事項。 然而，大部分考量都適用於所有執行含外部 RAM 和快閃記憶體圖形處理的 STM32 MCU。"><link data-rh="true" rel="icon" href="/4.25/zh-TW/img/favicon.png"><link data-rh="true" rel="canonical" href="https://support.touchgfx.com/4.25/zh-TW/docs/development/scenarios/running-graphics-on-stm32h7r"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/docs/development/scenarios/running-graphics-on-stm32h7r" hreflang="en"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/ko/docs/development/scenarios/running-graphics-on-stm32h7r" hreflang="ko"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/ja/docs/development/scenarios/running-graphics-on-stm32h7r" hreflang="ja"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/zh-CN/docs/development/scenarios/running-graphics-on-stm32h7r" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/zh-TW/docs/development/scenarios/running-graphics-on-stm32h7r" hreflang="zh-TW"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/docs/development/scenarios/running-graphics-on-stm32h7r" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://B8LNOI0XWD-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="TouchGFX Documentation" href="/4.25/zh-TW/opensearch.xml">


<script src="/4.25/zh-TW/js/one-trust.js"></script>
<script src="/4.25/js/fix-location.js"></script><link rel="stylesheet" href="/4.25/zh-TW/assets/css/styles.6e57ba1f.css">
<link rel="preload" href="/4.25/zh-TW/assets/js/runtime~main.243e6403.js" as="script">
<link rel="preload" href="/4.25/zh-TW/assets/js/main.128b9131.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><div role="region" aria-label="跳轉到主要內容"><a class="skipToContent_xAYN" href="#__docusaurus_skipToContent_fallback">跳轉到主要內容</a></div><nav aria-label="主要" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切換導覽列" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/4.25/zh-TW/docs/introduction/welcome"><div class="navbar__logo"><img src="/4.25/zh-TW/img/logo.svg" alt="TouchGFX" class="themedImage_m0dh themedImage--light_OZkp"><img src="/4.25/zh-TW/img/logo.svg" alt="TouchGFX" class="themedImage_m0dh themedImage--dark_ViMM"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/4.25/zh-TW/docs/introduction/welcome">文件</a><a class="navbar__item navbar__link" href="/4.25/zh-TW/docs/api/namespacetouchgfx">API</a><a class="navbar__item navbar__link" sidebarid="academy" href="/4.25/zh-TW/academy/academy-introduction">TouchGFX學院</a><a href="https://community.st.com/s/topic/0TO0X0000003iw6WAA/touchgfx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">社區</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/4.25/zh-TW/docs/introduction/welcome">4.25</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/4.25/zh-TW/docs/development/scenarios/running-graphics-on-stm32h7r">4.25</a></li><li><a href="https://support.touchgfx.com/4.25" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.25<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.24" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.24<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.23" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.23<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.22" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.22<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.21" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.21<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.20" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.20<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.19" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.19<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.18" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.18<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.17" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.17<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.16" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.16<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.15" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.15<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.14" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.14<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.13" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.13<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">繁體中文</a><ul class="dropdown__menu"><li><a href="/4.25/docs/development/scenarios/running-graphics-on-stm32h7r" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/4.25/ko/docs/development/scenarios/running-graphics-on-stm32h7r" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ko">한국어</a></li><li><a href="/4.25/ja/docs/development/scenarios/running-graphics-on-stm32h7r" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja">日本語</a></li><li><a href="/4.25/zh-CN/docs/development/scenarios/running-graphics-on-stm32h7r" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-CN">简体中文</a></li><li><a href="/4.25/zh-TW/docs/development/scenarios/running-graphics-on-stm32h7r" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-TW">繁體中文</a></li></ul></div><div class="searchBox_y6an"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_ovZa docsWrapper_a09d"><button aria-label="滾動返回頂部" class="clean-btn theme-back-to-top-button backToTopButton_PCdr" type="button"></button><div class="docPage_CL8Z"><aside class="theme-doc-sidebar-container docSidebarContainer_ThtD"><div class="sidebarViewport_mAJy"><div class="sidebar_Oq1e"><nav aria-label="文件側邊欄" class="menu thin-scrollbar menu_M44W"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.25/zh-TW/docs/category/introduction">介紹</a><button aria-label="切換可折疊邊欄類別“介紹”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.25/zh-TW/docs/category/basic-concepts">基本概念</a><button aria-label="切換可折疊邊欄類別“基本概念”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/4.25/zh-TW/docs/development/development-introduction">開發</a><button aria-label="切換可折疊邊欄類別“開發”" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.25/zh-TW/docs/development/hardware-selection/hardware-selection-introduction">硬體選擇</a><button aria-label="切換可折疊邊欄類別“硬體選擇”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.25/zh-TW/docs/development/board-bring-up/board-introduction">開發板搭建</a><button aria-label="切換可折疊邊欄類別“開發板搭建”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.25/zh-TW/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction">TouchGFX AL開發</a><button aria-label="切換可折疊邊欄類別“TouchGFX AL開發”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.25/zh-TW/docs/development/ui-development/ui-development-introduction">UI開發</a><button aria-label="切換可折疊邊欄類別“UI開發”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/4.25/zh-TW/docs/category/scenarios-2">場景</a><button aria-label="切換可折疊邊欄類別“場景”" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-TW/docs/development/scenarios/touchgfx-on-lowcost-hardware">低硬體成本上的TouchGFX</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-TW/docs/development/scenarios/touchgfx-on-gpu2d">NeoChrom/NeoChromVG上的TouchGFX</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/4.25/zh-TW/docs/development/scenarios/running-graphics-on-stm32h7r">在 STM32H7R7 與 S7 上執行圖形處理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-TW/docs/development/scenarios/running-graphics-from-external-ram">從外部 RAM 執行圖形處理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-TW/docs/development/scenarios/lowering-memory-usage-with-partial-framebuffer">通過部分影像緩衝降低記憶體使用率</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-TW/docs/flash-limited">快閃記憶體受限的GUI開發</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-TW/docs/development/scenarios/using-non-memory-mapped-flash">使用非記憶體映射快閃記憶體存儲影像</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-TW/docs/development/scenarios/using-serial-flash">使用串列快閃記憶體存儲圖像和字體</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-TW/docs/development/scenarios/fonts-in-unmapped-flash">對字體資料使用非記憶體映射快閃記憶體</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-TW/docs/development/scenarios/scenarios-change-pixelformat-bpp">更改應用程式的像素格式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-TW/docs/development/scenarios/scenarios-create-at">創建TouchGFX開發板配置</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-TW/docs/development/scenarios/example-gpio">外部事件作為觸發器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-TW/docs/development/scenarios/running-without-rtos">在STM32G071 Nucleo上運行的範例應用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-TW/docs/development/scenarios/adding-files-to-stm32cubemx-projet">在STM32CubeMX專案中添加檔</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-TW/docs/development/scenarios/converting-keil5-project-to-keil6">將 Keil 編譯器 5 專案轉換為 Keil 編譯器 6</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-TW/docs/development/scenarios/cmake-as-build-system">CMake 作為建置系統</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.25/zh-TW/docs/category/miscellaneous-1">其他情況</a><button aria-label="切換可折疊邊欄類別“其他情況”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.25/zh-TW/docs/category/resources">資源</a><button aria-label="切換可折疊邊欄類別“資源”" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_fxxJ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_QTf6"><div id="doc-version-banner-identifier" class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>這是<!-- -->TouchGFX<!-- --> <b>4.25</b> 的文件，該版本不再被主動維護。</div><div class="margin-top--md">如需最新文件，請參閱<b><a href="https://support.touchgfx.com/docs/development/scenarios/running-graphics-on-stm32h7r" target="_blank" rel="noopener noreferrer">最新版本</a></b>。</div></div><div class="docItemContainer_yTh1"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer__o78" aria-label="階層連結"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.25/zh-TW/docs/development/development-introduction"><span itemprop="name">開發</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.25/zh-TW/docs/category/scenarios-2"><span itemprop="name">場景</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">在 STM32H7R7 與 S7 上執行圖形處理</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_CArF theme-doc-toc-mobile tocMobile_PMGv"><button type="button" class="clean-btn tocCollapsibleButton_I8Hj">在當前頁面</button></div><div class="theme-doc-markdown markdown"><header><h1>在 STM32H7R7 與 S7 上執行圖形處理</h1></header><p>本文介紹 STM32H7R/S 系列 MCU 的具體架構，並討論用於圖形應用時需要考慮的事項。 然而，大部分考量都適用於所有執行含外部 RAM 和快閃記憶體圖形處理的 STM32 MCU。</p><p>本文不是教導如何建立 TouchGFX 開發板設定 (TBS) 的初學者指南，STM32H7R/S 是一款高效能且進階的 MCU。 因此，本文將只特別針對 STM32H7R/S 深入探討重要的領域。 有關如何建立 TouchGFX TBS 的一般簡介，請參閱「<a href="/4.25/zh-TW/docs/development/board-bring-up/board-introduction">開發板初次啟動指南</a>」。<br>
<!-- -->有關 STM32H7R7/S7 詳細資訊請參閱<a href="https://www.st.com/en/microcontrollers-microprocessors/stm32h7r7-7s7.html" target="_blank" rel="noopener noreferrer">產品頁面</a>或<a href="https://www.youtube.com/playlist?list=PLnMKNibPkDnF2fL7nhQ08V0bPi2poXVpH" target="_blank" rel="noopener noreferrer">包含完整 STM32H7RS 示範工作坊的 YouTube 播放清單</a>。</p><p>TouchGFX Designer 包含一個適用於 STM32H7S78 DK 的 TBS，這是在 STM32H7R/S 上執行 TouchGFX 的完整範例專案。 在為 STM32H7R/S 開發 TouchGFX 應用程式時，可以使用 TBS 作為參考。 該專案以 STM32CubeMX 為基礎，亦即可以透過開啟 STM32H7S78-DK.ioc 檔案存取快取、MPU、外部記憶體等的建議設定。</p><div class="figure"><a href="/4.25/zh-TW/img/development/scenarios/running-graphics-on-stm32h7r/stm32h7s-tbs.png" target="_blank"><img src="/4.25/zh-TW/img/development/scenarios/running-graphics-on-stm32h7r/stm32h7s-tbs.png"></a><p>TouchGFX Designer 中提供的 TouchGFX Board 設定</p></div><h2 class="anchor anchorWithStickyNavbar_k1OW" id="記憶體設定">記憶體設定<a href="#記憶體設定" class="hash-link" aria-label="直接連結到記憶體設定" title="直接連結到記憶體設定">​</a></h2><p>STM32H7R/S 是一款開機快閃記憶體 MCU。 開機快閃記憶體 MCU 是一種具有小型嵌入式快閃記憶體的 MCU，其中包含啟動程式，而主應用程式與資產一起放在外部記憶體中。 STM32H7R/S 還具有 620 kB 的嵌入式 SRAM。 因此，STM32H7R/S 在用於圖形應用時依賴外部 RAM 和快閃記憶體。 當使用外部記憶體進行圖形處理時，外部記憶體的記憶體頻寬通常會成為瓶頸，因為外部記憶體以 CPU 頻率的二或三分之一運作。 對於 STM32H7R7/S7，兩個 XSPI (16 位元和 8 位元) 介面能夠以高達 200 MHz 的雙倍傳輸速率運作，而 FMC (16 位元或 32 位元) 能夠以高達 100 MHz 的速度運作。</p><h3 class="anchor anchorWithStickyNavbar_k1OW" id="外部記憶體管理器">外部記憶體管理器<a href="#外部記憶體管理器" class="hash-link" aria-label="直接連結到外部記憶體管理器" title="直接連結到外部記憶體管理器">​</a></h3><p>STM32CubeMX 的「類別」→「中介軟體和軟體套件」下，提供了兩個名為「外部記憶體管理器」和「外部記憶體載入器」的工具。 建立這些工具是為了幫助使用者在開機快閃記憶體或無快閃應用程式中設定外部記憶體。 這些工具使得建立外部載入器變得更加容易，例如選擇應用程式類型。 有關工具的介紹請見<a href="https://wiki.st.com/stm32mcu/wiki/Getting_started_with_External_memory_Manager_and_External_memory_loader" target="_blank" rel="noopener noreferrer">這裡</a>。 一篇名為《STM32 外部序列記憶體簡介》的新文章即將發布。</p><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content"><p>[外部記憶體管理器和外部記憶體載入器入門]<!-- --> (<a href="https://wiki.st.com/stm32mcu/wiki/Getting_started_with_External_memory_Manager_and_External_memory_loader" target="_blank" rel="noopener noreferrer">https://wiki.st.com/stm32mcu/wiki/Getting_started_with_External_memory_Manager_and_External_memory_loader</a>)</p></div></div><h3 class="anchor anchorWithStickyNavbar_k1OW" id="外部-ram-中的影像緩衝區">外部 RAM 中的影像緩衝區<a href="#外部-ram-中的影像緩衝區" class="hash-link" aria-label="直接連結到外部 RAM 中的影像緩衝區" title="直接連結到外部 RAM 中的影像緩衝區">​</a></h3><p>外部 RAM 具有影像緩衝區時，首先要考慮並且最重要的事，就是記憶體頻寬要求和限制。 對於不含 GRAM 的顯示器，需要以顯示器指定的速率連續傳送影像緩衝區。 對於探索套件上使用的顯示器，頻率為 60 Hz。 亦即僅更新 LTDC 就會佔用外部 RAM 介面上的大量頻寬。 LTDC 所需頻寬可按以下公式計算：</p><p>像素時脈 = LCD_CLK = 總螢幕尺寸 <!-- -->*<!-- --> 更新率<br>
<!-- -->所需頻寬 (對於一個 LTDC 層) = LCD_CLK <!-- -->*<!-- --> Bpp</p><p>此外，DMA2D 和 GPU2D 在影像緩衝區上執行操作時，也需要外部 RAM 上的頻寬。 如果記憶體也用於其他用途 (例如應用程式程式碼)，這將進一步降低頻寬。<br>
<!-- -->綜合起來，這些因素會造成外部 RAM 匯流排混亂。</p><p>點選<a href="/4.25/zh-TW/docs/development/scenarios/running-graphics-from-external-ram">此處</a>閱讀文章，瞭解在外部 RAM 中使用影像緩衝區執行圖形處理時的注意事項。</p><p>如欲深入瞭解在外部 RAM 中使用 LTDC 顯示器介面和影像緩衝區的限制和注意事項，請參閱「<a href="https://www.st.com/resource/en/application_note/an4861-introduction-to-lcdtft-display-controller-ltdc-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">LTDC 應用說明</a>」。 請特別注意第 5 章：「使用 LTDC 建立圖形應用程式」和第 7 章：「LTDC 應用程式範例」。<br>
<!-- -->如果外部 RAM 的頻寬已達到極限，請考慮第 5.5.2 章：「最佳化從外部記憶體擷取的 LTDC 影像緩衝區」和第 5.5.3 章：「最佳化從 SDRAM 擷取的 LTDC 影像緩衝區」。</p><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content"><ul><li>[從外部 RAM 執行圖形處理]<!-- --> (running-graphics-from-external-ram)</li><li>[AN4861：STM32 MCU 上的 LCD-TFT 顯示器控制器 (LTDC) 簡介]<!-- --> (<a href="https://www.st.com/resource/en/application_note/an4861-introduction-to-lcdtft-display-controller-ltdc-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">https://www.st.com/resource/en/application_note/an4861-introduction-to-lcdtft-display-controller-ltdc-on-stm32-mcus-stmicroelectronics.pdf</a>)</li></ul></div></div><h3 class="anchor anchorWithStickyNavbar_k1OW" id="緊密耦合記憶體">緊密耦合記憶體<a href="#緊密耦合記憶體" class="hash-link" aria-label="直接連結到緊密耦合記憶體" title="直接連結到緊密耦合記憶體">​</a></h3><p>STM32H7R/S Cortex-M7 具有 64 位元寬的緊密耦合記憶體 (TCM) 直接存取功能，且無需等待狀態。 其具有最高 192 kB 的資料 TCM (DTCM) 和指令 TCM (ITCM)。 因此，DTCM 和 ITCM 分別是讀取/寫入資料和擷取指令的最佳位置。 因此，ITCM 應該用於具有確定性執行的關鍵程式碼，例如無法等待快取未中的中斷處理程序，以及關鍵控制迴路。 在使用 RTOS 的即時應用程式中，一般大量使用堆積。 因此建議將 RTOS 堆疊和堆積放在 DTCM 中。 如果還有剩餘空間，全域變數也可以放在這裡。</p><p>值得注意的是，ITCM 和 DTCM 使用 SRAM1 和 SRAM3 記憶體的某些部分。 也就是說，使用 ITCM 和 DTCM 時，內部 SRAM 的大小會縮小。</p><div class="figure"><a href="/4.25/zh-TW/img/development/scenarios/running-graphics-on-stm32h7r/tcm-illustration.png" target="_blank"><img src="/4.25/zh-TW/img/development/scenarios/running-graphics-on-stm32h7r/tcm-illustration.png"></a><p>STM32H7R/S 緊密耦合記憶體的示意圖</p></div><p>與其他 H7 MCU 一樣，STM32H7R/S 具有 1 級 (L1) 快取。 有關 L1 快取，詳細資訊請參閱「<a href="https://www.st.com/resource/en/application_note/an4839-level-1-cache-on-stm32f7-series-and-stm32h7-series-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">H7 快取應用說明</a>」。 請特別注意第 4 章：「應避免的錯誤和秘訣」。</p><p>有關如何設定外部 SPI 記憶體的詳細說明，請參閱「<a href="https://www.st.com/resource/en/application_note/an5050-getting-started-with-octospi-hexadecaspi-and-xspi-interface-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">OSPI、HSPI 和 XSPI 應用說明</a>」。</p><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content"><ul><li>[AN6062：STM32H7Rx/7Sx 系統架構與效能簡介]<!-- --> (<a href="https://www.st.com/resource/en/application_note/an6062-introduction-to-stm32h7rx7sx-system-architecture-and-performance-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">https://www.st.com/resource/en/application_note/an6062-introduction-to-stm32h7rx7sx-system-architecture-and-performance-stmicroelectronics.pdf</a>)</li><li>[AN4839：STM32F7 系列和 STM32H7 系列上的 1 級快取]<!-- --> (<a href="https://www.st.com/resource/en/application_note/an4839-level-1-cache-on-stm32f7-series-and-stm32h7-series-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">https://www.st.com/resource/en/application_note/an4839-level-1-cache-on-stm32f7-series-and-stm32h7-series-stmicroelectronics.pdf</a>)</li><li>[AN5050：STM32 MCU 上 Octo-SPI、Hexadeca-SPI 和 XSPI 介面入門]<!-- --> (<a href="https://www.st.com/resource/en/application_note/an5050-getting-started-with-octospi-hexadecaspi-and-xspi-interface-on-stm32-mcus-stmicroelectronics.pdf)%E3%80%82" target="_blank" rel="noopener noreferrer">https://www.st.com/resource/en/application_note/an5050-getting-started-with-octospi-hexadecaspi-and-xspi-interface-on-stm32-mcus-stmicroelectronics.pdf)。</a></li></ul></div></div><h2 class="anchor anchorWithStickyNavbar_k1OW" id="應用程式類型">應用程式類型<a href="#應用程式類型" class="hash-link" aria-label="直接連結到應用程式類型" title="直接連結到應用程式類型">​</a></h2><p>在啟動期間，啟動程式可以根據所選的應用程式類型執行不同的任務。 可以指向外部快閃記憶體中已存在的應用程式，也可以將應用程式載入到另一個記憶體 (通常是外部 RAM)。<br>
<!-- -->執行已存在於外部快閃記憶體中的應用程式稱為「就地執行」(XiP)。 在啟動期間將應用程式從快閃記憶體複製到 RAM，然後從 RAM 執行的程序稱為「載入並執行」(LRUN)。</p><p>如果應用程式經過加密，則只能使用 LRUN。 有關 STM32 加密，詳細資訊請參閱「<a href="https://www.st.com/resource/en/application_note/an6088-how-to-use-mce-for-encryptiondecryption-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">加密應用說明</a>」。</p><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content"><p>[AN6088：如何在 STM32 MCU 上使用 MCE 進行加密/解密]<!-- --> (<a href="https://www.st.com/resource/en/application_note/an6088-how-to-use-mce-for-encryptiondecryption-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">https://www.st.com/resource/en/application_note/an6088-how-to-use-mce-for-encryptiondecryption-on-stm32-mcus-stmicroelectronics.pdf</a>)</p></div></div><h3 class="anchor anchorWithStickyNavbar_k1OW" id="就地執行-xip">就地執行 (XiP)<a href="#就地執行-xip" class="hash-link" aria-label="直接連結到就地執行 (XiP)" title="直接連結到就地執行 (XiP)">​</a></h3><p>以下為 XiP 記憶體配置在圖形應用程式中的範例。 XiP 是預設的應用程式類型。</p><div class="figure"><a href="/4.25/zh-TW/img/development/scenarios/running-graphics-on-stm32h7r/xip-illustration.png" target="_blank"><img src="/4.25/zh-TW/img/development/scenarios/running-graphics-on-stm32h7r/xip-illustration.png"></a><p>XiP 圖形應用程式的示意圖</p></div><p>如 XiP 示意圖所示，連接外部快閃記憶體的 OctoSPI 介面用於存取應用程式程式碼和圖形資產。 CPU 不斷存取應用程式程式碼，這會導致 NeoChrom GPU 或 Chrom-ART 存取資產時的存取時間變慢。 這將對圖形效能產生負面影響。 為了克服這項挑戰，強烈建議在執行 XiP 時啟用外部快閃記憶體的指令快取。 如此一來，重複指令將從快取中讀取，而不是從外部快閃記憶體中讀取，進而減少頻寬的負載，並提高外部快閃記憶體介面的效率。</p><h3 class="anchor anchorWithStickyNavbar_k1OW" id="載入並執行-lrun">載入並執行 (LRUN)<a href="#載入並執行-lrun" class="hash-link" aria-label="直接連結到載入並執行 (LRUN)" title="直接連結到載入並執行 (LRUN)">​</a></h3><p>以下為 LRUN 的對應範例。</p><div class="figure"><a href="/4.25/zh-TW/img/development/scenarios/running-graphics-on-stm32h7r/lrun-illustration.png" target="_blank"><img src="/4.25/zh-TW/img/development/scenarios/running-graphics-on-stm32h7r/lrun-illustration.png"></a><p>LRUN 圖形應用程式的示意圖</p></div><p>如 LRUN 示意圖所示，應用程式程式碼現在與圖形資產分離，進而改善了資產的存取。 然而，這也表示其現在充當外部 RAM 的介面，需要在 RAM 中載入資料，用來存取影像緩衝區和應用程式程式碼。 在這種情況下，強烈建議在外部 RAM 介面上啟用指令快取。</p><p>在 STM32H7R/S 上使用 LRUN 執行圖形應用程式時，還需要考慮幾件事以實現最佳效能。<br>
<!-- -->首先，考慮是否可以將資產 (點陣圖、字型等) 保存在外部快閃記憶體中。 由於資產存取頻率較高，將其儲存在外部 RAM 會顯著增加對外部 RAM 頻寬的負載。 此外，通常不需要加密資產。<br>
<!-- -->其次，值得研究應用程式程式碼是否適合內部 SRAM，如下所示。 與外部快閃記憶體或外部 RAM 相比，由於內部匯流排速度更快，因此可以從內部 SRAM 更快存取和執行應用程式程式碼。 STM32H7R/S 上的 AXI 匯流排 (與內部 SRAM 連接) 能夠以高達 300 MHz 的速度運作。 此外，此設定使資產、影像緩衝區和應用程式程式碼得以放置在三個不同的位置，進而將頻寬負載分散到三個獨立的匯流排上。</p><div class="figure"><a href="/4.25/zh-TW/img/development/scenarios/running-graphics-on-stm32h7r/lrun-intram-illustration.png" target="_blank"><img src="/4.25/zh-TW/img/development/scenarios/running-graphics-on-stm32h7r/lrun-intram-illustration.png"></a><p>LRUN 圖形應用程式 (應用程式程式碼位於內部 RAM 中) 的示意圖</p></div><h3 class="anchor anchorWithStickyNavbar_k1OW" id="效能比較">效能比較<a href="#效能比較" class="hash-link" aria-label="直接連結到效能比較" title="直接連結到效能比較">​</a></h3><p>以下是分別使用 XiP 和 LRUN 的複雜 GUI 範例。 LRUN 應用程式的應用程式程式碼位於在內部 SRAM。 比較顯示了 MCU 負載如何受到不同設定的影響。 透過將 TouchGFX 架構和應用程式放在內部 SRAM 中，可減少外部 RAM 和快閃記憶體中的擷取週期數，進而有效降低 MCU 的負載。<br>
<!-- -->示範參考是在 STM32H7S78-DK 上運作的開箱即用示範。</p><div class="figure"><a href="/4.25/zh-TW/img/development/scenarios/running-graphics-on-stm32h7r/lrun-xip-comparison.png" target="_blank"><img src="/4.25/zh-TW/img/development/scenarios/running-graphics-on-stm32h7r/lrun-xip-comparison.png"></a><p>LRUN 和 XiP 應用程式的 MCU 負載比較</p></div><p>比較顯示，當應用程式程式碼放在內部 SRAM 中，MCU 負載會減輕。 與 XiP 相比，使用 LRUN 時 MCU 負載減少約 50%。</p><p>比較顯示，當應用程式程式碼放在內部 SRAM 中，MCU 負載顯著降低。 這是因為與外部 RAM 和快閃記憶體相比，內部 SRAM 的存取時間更快。 與 XiP 相比，當使用 LRUN 並將應用程式程式碼放在內部 SRAM 時，MCU 負載減少了 50%。 使用 LRUN 並將應用程式程式碼儲存在內部 SRAM，可發揮最佳效能。 然而，只有當應用程式程式碼適合可用的內部 SRAM 時，這種設定才是可行的。</p><h2 class="anchor anchorWithStickyNavbar_k1OW" id="mpu-設定">MPU 設定<a href="#mpu-設定" class="hash-link" aria-label="直接連結到MPU 設定" title="直接連結到MPU 設定">​</a></h2><p>記憶體保護單元 (MPU) 用於保護記憶體區域免受意外的記憶體存取和執行。<br>
<!-- -->在 Arm® Cortex®-M7 處理器上，防止投機性存取非常重要，因為這會導致在外部記憶體上執行時的高延遲或系統錯誤。 對於 STM32H7R/S，這將影響存取記憶體的 AXI 主機，並會顯著降低圖形效能。<br>
<!-- -->透過控制可存取的位址範圍，MPU 可用於防止投機性讀取存取。 最簡單的方法是使用具有整個記憶體區域的後台區域，透過將其設定為「嚴格有序，永不執行」來限制存取。</p><p>背景區域應在 ID 為 -1 的預設區域中定義，如此一來其他所有區域都將優先於此區域。 接著，應該為需要存取的記憶體區域定義具有相應設定的其他 MPU 區域。 在 STM32H7R/S 上最多可以定義 16 個區域。</p><p>以下為 STM32H7S78 DK TBS 的 MPU 設定。 此設定可以作為參考。</p><table><thead><tr><th><strong>區域 0</strong></th><th><strong>全部</strong></th><th><strong>附註</strong></th></tr></thead><tbody><tr><td><em>屬性</em></td><td><em>值</em></td><td></td></tr><tr><td>MPU 區域基底位址</td><td>0x0</td><td></td></tr><tr><td>MPU 區域大小</td><td>4 GB</td><td>覆蓋 MCU 的整個記憶體區域</td></tr><tr><td>MPU 子區域停用</td><td>0x0</td><td></td></tr><tr><td>MPU TEX 欄位層級</td><td>0 級</td><td></td></tr><tr><td>MPU 存取權限</td><td>禁止一切存取</td><td>限制所有存取</td></tr><tr><td>MPU 指令存取</td><td>停用</td><td></td></tr><tr><td>MPU 共用權限</td><td>啟用</td><td></td></tr><tr><td>MPU 快取權限</td><td>停用</td><td></td></tr><tr><td>MPU 緩衝權限</td><td>停用</td><td></td></tr></tbody></table><table><thead><tr><th><strong>區域 1</strong></th><th><strong>外部快閃記憶體</strong></th><th><strong>附註</strong></th></tr></thead><tbody><tr><td><em>屬性</em></td><td><em>值</em></td><td></td></tr><tr><td>MPU 區域基底位址</td><td>0x70000000</td><td>XSPI2 (外部快閃記憶體) 的基底位址</td></tr><tr><td>MPU 區域大小</td><td>128 MB</td><td>開發板上有 128 MBytes 的外部快閃記憶體</td></tr><tr><td>MPU 子區域停用</td><td>0x0</td><td></td></tr><tr><td>MPU TEX 欄位層級</td><td>1 級</td><td></td></tr><tr><td>MPU 存取權限</td><td>允許所有存取</td><td></td></tr><tr><td>MPU 指令存取</td><td>停用</td><td></td></tr><tr><td>MPU 共用權限</td><td>停用</td><td></td></tr><tr><td>MPU 快取權限</td><td>啟用</td><td></td></tr><tr><td>MPU 緩衝權限</td><td>啟用</td><td></td></tr></tbody></table><table><thead><tr><th><strong>區域 2</strong></th><th><strong>外部快閃記憶體</strong></th><th><strong>附註</strong></th></tr></thead><tbody><tr><td><em>屬性</em></td><td><em>值</em></td><td></td></tr><tr><td>MPU 區域</td><td>啟用</td><td></td></tr><tr><td>MPU 區域基底位址</td><td>0x70000000</td><td>XSPI2 (外部快閃記憶體) 的基底位址</td></tr><tr><td>MPU 區域大小</td><td>2 MB</td><td>應用程式程式碼所在的外部快閃記憶體的前 2 MB 的屬性被覆寫</td></tr><tr><td>MPU 子區域停用</td><td>0x0</td><td></td></tr><tr><td>MPU TEX 欄位層級</td><td>1 級</td><td></td></tr><tr><td>MPU 存取權限</td><td>允許所有存取</td><td></td></tr><tr><td>MPU 指令存取</td><td>啟用</td><td></td></tr><tr><td>MPU 共用權限</td><td>停用</td><td></td></tr><tr><td>MPU 快取權限</td><td>啟用</td><td></td></tr><tr><td>MPU 緩衝權限</td><td>啟用</td><td></td></tr></tbody></table><table><thead><tr><th><strong>區域 3</strong></th><th><strong>外部 PSRAM</strong></th><th><strong>附註</strong></th></tr></thead><tbody><tr><td><em>屬性</em></td><td><em>值</em></td><td></td></tr><tr><td>MPU 區域基底位址</td><td>0x90000000</td><td>XSPI1 (外部 PSRAM) 的基底位址</td></tr><tr><td>MPU 區域大小</td><td>32 MB</td><td>開發板上有 32 MBytes 的外部 PSRAM</td></tr><tr><td>MPU 子區域停用</td><td>0x0</td><td></td></tr><tr><td>MPU TEX 欄位層級</td><td>1 級</td><td></td></tr><tr><td>MPU 存取權限</td><td>允許所有存取</td><td></td></tr><tr><td>MPU 指令存取</td><td>停用</td><td></td></tr><tr><td>MPU 共用權限</td><td>停用</td><td></td></tr><tr><td>MPU 快取權限</td><td>停用</td><td></td></tr><tr><td>MPU 緩衝權限</td><td>停用</td><td></td></tr></tbody></table><table><thead><tr><th><strong>區域 4</strong></th><th><strong>DTCM</strong></th><th><strong>附註</strong></th></tr></thead><tbody><tr><td><em>屬性</em></td><td><em>值</em></td><td></td></tr><tr><td>MPU 區域基底位址</td><td>0x20000000</td><td>DTCM 的基底位址</td></tr><tr><td>MPU 區域大小</td><td>64 kB</td><td>預設 64 kB 的 DTCM</td></tr><tr><td>MPU 子區域停用</td><td>0x0</td><td></td></tr><tr><td>MPU TEX 欄位層級</td><td>1 級</td><td></td></tr><tr><td>MPU 存取權限</td><td>允許所有存取</td><td></td></tr><tr><td>MPU 指令存取</td><td>停用</td><td></td></tr><tr><td>MPU 共用權限</td><td>停用</td><td></td></tr><tr><td>MPU 快取權限</td><td>停用</td><td>停用 DTCM 上的快取，因為其不會提高效能</td></tr><tr><td>MPU 緩衝權限</td><td>停用</td><td></td></tr></tbody></table><table><thead><tr><th><strong>區域 5</strong></th><th><strong>SRAM</strong></th><th><strong>附註</strong></th></tr></thead><tbody><tr><td><em>屬性</em></td><td><em>值</em></td><td></td></tr><tr><td>MPU 區域基底位址</td><td>0x24000000</td><td>SRAM1 的基底位址</td></tr><tr><td>MPU 區域大小</td><td>512 kB</td><td>涵蓋 SRAM1、SRAM2、SRAM3 和 SRAM4</td></tr><tr><td>MPU 子區域停用</td><td>0x0</td><td></td></tr><tr><td>MPU TEX 欄位層級</td><td>1 級</td><td></td></tr><tr><td>MPU 存取權限</td><td>允許所有存取</td><td></td></tr><tr><td>MPU 指令存取</td><td>停用</td><td></td></tr><tr><td>MPU 共用權限</td><td>啟用</td><td></td></tr><tr><td>MPU 快取權限</td><td>啟用</td><td></td></tr><tr><td>MPU 緩衝權限</td><td>啟用</td><td></td></tr></tbody></table><table><thead><tr><th><strong>區域 6</strong></th><th><strong>GPU2D 指令清單</strong></th><th><strong>附註</strong></th></tr></thead><tbody><tr><td><em>屬性</em></td><td><em>值</em></td><td></td></tr><tr><td>MPU 區域基底位址</td><td>0x2406e000</td><td>NeoChrom GPU 指令清單放在此處</td></tr><tr><td>MPU 區域大小</td><td>16 kB</td><td>使用 TouchGFX 時 NeoChrom GPU 指令清單的預設大小 (在 nema_hal.c 中定義)</td></tr><tr><td>MPU 子區域停用</td><td>0x0</td><td></td></tr><tr><td>MPU TEX 欄位層級</td><td>0 級</td><td></td></tr><tr><td>MPU 存取權限</td><td>允許所有存取</td><td></td></tr><tr><td>MPU 指令存取</td><td>停用</td><td></td></tr><tr><td>MPU 共用權限</td><td>啟用</td><td></td></tr><tr><td>MPU 快取權限</td><td>停用</td><td>停用指令清單快取</td></tr><tr><td>MPU 緩衝權限</td><td>啟用</td><td></td></tr></tbody></table><p>有關圖形特定的 MPU 設定秘訣，請參閱「<a href="https://www.st.com/resource/en/application_note/an4861-introduction-to-lcdtft-display-controller-ltdc-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">LTDC 應用說明</a>」第 5.6.2 節「設定記憶體保護單元 (MPU)」。</p><p>如需進一步參考，請參閱「<a href="https://www.st.com/resource/en/application_note/an4838-introduction-to-memory-protection-unit-management-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">MPU 應用說明</a>」。 請特別注意第 3 章：「Cortex-M0+/M3/M4/M7 記憶體類型、暫存器和屬性」及第 6 章：「在 Armv6 和 Armv7 架構上使用 STM32Cube HAL 的 MPU 設定範例」。</p><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content"><ul><li>[AN4861：STM32 MCU 上的 LCD-TFT 顯示器控制器 (LTDC) 簡介]<!-- --> (<a href="https://www.st.com/resource/en/application_note/an4861-introduction-to-lcdtft-display-controller-ltdc-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">https://www.st.com/resource/en/application_note/an4861-introduction-to-lcdtft-display-controller-ltdc-on-stm32-mcus-stmicroelectronics.pdf</a>)</li><li>[AN4838：STM32 MCU 上的記憶體保護單元管理簡介]<!-- --> (<a href="https://www.st.com/resource/en/application_note/an4838-introduction-to-memory-protection-unit-management-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">https://www.st.com/resource/en/application_note/an4838-introduction-to-memory-protection-unit-management-on-stm32-mcus-stmicroelectronics.pdf</a>)</li></ul></div></div><h2 class="anchor anchorWithStickyNavbar_k1OW" id="偵錯">偵錯<a href="#偵錯" class="hash-link" aria-label="直接連結到偵錯" title="直接連結到偵錯">​</a></h2><p>TouchGFX Designer 中 TBS 的 readme 檔案提供有關以下在 STM32CubeIDE 中進行 STM32H7R/S 偵錯的指南。</p><p>由於 STM32H7S78-DK 的 TBS 的啟動程式和應用程式結構，在 IDE 中進行程式碼偵錯可能很複雜。 若要在 STM32CubeIDE 中逐步執行 TouchGFX 應用程式的程式碼，請依照下列步驟操作：</p><ol><li>在 TouchGFX Designer 中產生程式碼</li><li>在 STM32CubeIDE 中開啟專案</li><li>啟動 Boot 專案的偵錯工作階段</li><li>等待編譯和燒錄完成</li><li>終止偵錯工作階段 (Ctrl + F2)</li><li>啟動 Appli 專案的偵錯工作階段</li><li>等待編譯和燒錄完成</li><li>按一下「繼續」(F8)</li><li>按下 STM32H7S78-DK 開發板上的黑色 NRST 按鈕</li><li>應用程式現在位於 Appli 專案中 main() 第一行的中斷點。 如果沒有，請再按一次「繼續」(F8)</li><li>按一下「繼續」(F8) 或「跳過」(F6) 以繼續</li></ol><p>有關偵錯，詳細資訊請參閱「<a href="https://wiki.stmicroelectronics.cn/stm32mcu/wiki/Security:How_to_start_with_DA_access_on_STM32H7RS" target="_blank" rel="noopener noreferrer">如何開始在 STM32H7RS 上進行 DA 存取</a>」維基頁面。</p><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content"><p>[如何開始在 STM32H7RS 上進行 DA 存取]<!-- --> (<a href="https://wiki.stmicroelectronics.cn/stm32mcu/wiki/Security:How_to_start_with_DA_access_on_STM32H7RS" target="_blank" rel="noopener noreferrer">https://wiki.stmicroelectronics.cn/stm32mcu/wiki/Security:How_to_start_with_DA_access_on_STM32H7RS</a>)</p></div></div><h2 class="anchor anchorWithStickyNavbar_k1OW" id="圖形應用程式的結論和一般建議">圖形應用程式的結論和一般建議<a href="#圖形應用程式的結論和一般建議" class="hash-link" aria-label="直接連結到圖形應用程式的結論和一般建議" title="直接連結到圖形應用程式的結論和一般建議">​</a></h2><p>如上所述，在開發 STM32H7R/S 圖形應用程式時需要考慮幾點。 然而，只要牢記這些考量，就有可能藉助快速的 CPU 和強大的 GPU2D 實現出色的圖形效能。</p><p>首先，瞭解外部記憶體匯流排的頻寬非常重要。 這適用於所有使用外部 RAM 和快閃記憶體的 MCU，但由於 STM32H7R/S 的開機快閃記憶體結構，這一點尤其重要。</p><p>透過將關鍵指令和資料放置在 ITCM 和 DTCM 記憶體中，可以顯著提高效能。</p><p>啟用整合在 Arm® Cortex®-M7 處理器中的 L1 指令和資料快取，因為這也會提高效能。</p><p>根據應用程式要求選擇執行 XiP 還是 LRUN，但請務必注意記憶體頻寬。 如果應用程式程式碼適合內部 SRAM，LRUN 將具有最佳效能。</p><p>避免投機性讀取存取非常重要，因為這可能會顯著降低效能。 實現的方式是對所有記憶體區域應用適當的 MPU 設定。</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件頁面導航"><a class="pagination-nav__link pagination-nav__link--prev" href="/4.25/zh-TW/docs/development/scenarios/touchgfx-on-gpu2d"><div class="pagination-nav__sublabel">上一個</div><div class="pagination-nav__label">NeoChrom/NeoChromVG上的TouchGFX</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/4.25/zh-TW/docs/development/scenarios/running-graphics-from-external-ram"><div class="pagination-nav__sublabel">下一個</div><div class="pagination-nav__label">從外部 RAM 執行圖形處理</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_cuXu thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#記憶體設定" class="table-of-contents__link toc-highlight">記憶體設定</a><ul><li><a href="#外部記憶體管理器" class="table-of-contents__link toc-highlight">外部記憶體管理器</a></li><li><a href="#外部-ram-中的影像緩衝區" class="table-of-contents__link toc-highlight">外部 RAM 中的影像緩衝區</a></li><li><a href="#緊密耦合記憶體" class="table-of-contents__link toc-highlight">緊密耦合記憶體</a></li></ul></li><li><a href="#應用程式類型" class="table-of-contents__link toc-highlight">應用程式類型</a><ul><li><a href="#就地執行-xip" class="table-of-contents__link toc-highlight">就地執行 (XiP)</a></li><li><a href="#載入並執行-lrun" class="table-of-contents__link toc-highlight">載入並執行 (LRUN)</a></li><li><a href="#效能比較" class="table-of-contents__link toc-highlight">效能比較</a></li></ul></li><li><a href="#mpu-設定" class="table-of-contents__link toc-highlight">MPU 設定</a></li><li><a href="#偵錯" class="table-of-contents__link toc-highlight">偵錯</a></li><li><a href="#圖形應用程式的結論和一般建議" class="table-of-contents__link toc-highlight">圖形應用程式的結論和一般建議</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">保留所有權利 © 2024 STMicroelectronics | <a href="https://www.st.com/content/st_com/en/common/terms-of-use.html">使用條款</a> | <a href="https://www.st.com/content/st_com/en/common/privacy-policy.html">隱私權政策</a> | <a href="https://app-de.onetrust.com/app/#/webform/2b87200d-4023-4588-9df7-ab0cdea1a67e">行使您的權利</a></div></div></div></footer></div></div>
<script src="/4.25/zh-TW/assets/js/runtime~main.243e6403.js"></script>
<script src="/4.25/zh-TW/assets/js/main.128b9131.js"></script>
</body>
</html>