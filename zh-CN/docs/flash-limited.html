<!doctype html>
<html lang="zh-CN" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-development/scenarios/flash-limited-gui-development">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Flash受限的GUI开发 | TouchGFX Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://support.touchgfx.com/4.25/zh-CN/img/meta-image.png"><meta data-rh="true" name="twitter:image" content="https://support.touchgfx.com/4.25/zh-CN/img/meta-image.png"><meta data-rh="true" property="og:url" content="https://support.touchgfx.com/4.25/zh-CN/docs/flash-limited"><meta data-rh="true" name="docusaurus_locale" content="zh-CN"><meta data-rh="true" name="docsearch:language" content="zh-CN"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Flash受限的GUI开发 | TouchGFX Documentation"><meta data-rh="true" name="description" content="本文介绍了如何利用TouchGFX开发低Flash存储器使用率的图形用户界面。"><meta data-rh="true" property="og:description" content="本文介绍了如何利用TouchGFX开发低Flash存储器使用率的图形用户界面。"><link data-rh="true" rel="icon" href="/4.25/zh-CN/img/favicon.png"><link data-rh="true" rel="canonical" href="https://support.touchgfx.com/4.25/zh-CN/docs/flash-limited"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/docs/flash-limited" hreflang="en"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/ko/docs/flash-limited" hreflang="ko"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/ja/docs/flash-limited" hreflang="ja"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/zh-CN/docs/flash-limited" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/zh-TW/docs/flash-limited" hreflang="zh-TW"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/docs/flash-limited" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://B8LNOI0XWD-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="TouchGFX Documentation" href="/4.25/zh-CN/opensearch.xml">


<script src="/4.25/zh-CN/js/one-trust.js"></script>
<script src="/4.25/js/fix-location.js"></script><link rel="stylesheet" href="/4.25/zh-CN/assets/css/styles.29ed0336.css">
<link rel="preload" href="/4.25/zh-CN/assets/js/runtime~main.abcc4669.js" as="script">
<link rel="preload" href="/4.25/zh-CN/assets/js/main.cf98cd31.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><div role="region" aria-label="跳转到主要内容"><a class="skipToContent_XQ8D" href="#docusaurus_skipToContent_fallback">跳转到主要内容</a></div><nav aria-label="主要" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/4.25/zh-CN/docs/introduction/welcome"><div class="navbar__logo"><img src="/4.25/zh-CN/img/logo.svg" alt="TouchGFX" class="themedImage_S0p_ themedImage--light_HAsR"><img src="/4.25/zh-CN/img/logo.svg" alt="TouchGFX" class="themedImage_S0p_ themedImage--dark_ztGn"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/4.25/zh-CN/docs/introduction/welcome">文档</a><a class="navbar__item navbar__link" href="/4.25/zh-CN/docs/api/namespacetouchgfx">API</a><a class="navbar__item navbar__link" sidebarid="academy" href="/4.25/zh-CN/academy/academy-introduction">TouchGFX 学院</a><a href="https://community.st.com/s/topic/0TO0X0000003iw6WAA/touchgfx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">社区</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/4.25/zh-CN/docs/introduction/welcome">4.25</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/4.25/zh-CN/docs/flash-limited">4.25</a></li><li><a href="https://support.touchgfx.com/4.25" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.25<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.24" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.24<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.23" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.23<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.22" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.22<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.21" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.21<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.20" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.20<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.19" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.19<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.18" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.18<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.17" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.17<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.16" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.16<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.15" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.15<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.14" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.14<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.13" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.13<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">简体中文</a><ul class="dropdown__menu"><li><a href="/4.25/docs/flash-limited" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/4.25/ko/docs/flash-limited" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ko">한국어</a></li><li><a href="/4.25/ja/docs/flash-limited" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja">日本語</a></li><li><a href="/4.25/zh-CN/docs/flash-limited" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-CN">简体中文</a></li><li><a href="/4.25/zh-TW/docs/flash-limited" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-TW">繁體中文</a></li></ul></div><div class="searchBox_BKwK"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_Ew24 docsWrapper_sxyk"><button aria-label="滚动返回顶部" class="clean-btn theme-back-to-top-button backToTopButton_iHIs" type="button"></button><div class="docPage_S7pn"><aside class="theme-doc-sidebar-container docSidebarContainer_xHYe"><div class="sidebarViewport_t27s"><div class="sidebar_RCjb"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_YHDa"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.25/zh-CN/docs/category/introduction">介绍</a><button aria-label="切换可折叠边栏类别“介绍”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.25/zh-CN/docs/category/basic-concepts">基本概念</a><button aria-label="切换可折叠边栏类别“基本概念”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/4.25/zh-CN/docs/development/development-introduction">开发</a><button aria-label="切换可折叠边栏类别“开发”" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.25/zh-CN/docs/development/hardware-selection/hardware-selection-introduction">硬件选择</a><button aria-label="切换可折叠边栏类别“硬件选择”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.25/zh-CN/docs/development/board-bring-up/board-introduction">驱动板卡</a><button aria-label="切换可折叠边栏类别“驱动板卡”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.25/zh-CN/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction">TouchGFX AL开发</a><button aria-label="切换可折叠边栏类别“TouchGFX AL开发”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.25/zh-CN/docs/development/ui-development/ui-development-introduction">UI开发</a><button aria-label="切换可折叠边栏类别“UI开发”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/4.25/zh-CN/docs/category/scenarios-2">场景</a><button aria-label="切换可折叠边栏类别“场景”" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/touchgfx-on-lowcost-hardware">低成本硬件上的TouchGFX</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/touchgfx-on-gpu2d">NeoChrom/NeoChromVG在TouchGFX中的应用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/running-graphics-on-stm32h7r">Running graphics on STM32H7R7 &amp; S7</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/running-graphics-from-external-ram">Running graphics from external RAM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/lowering-memory-usage-with-partial-framebuffer">通过部分帧缓冲降低内存使用率</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/4.25/zh-CN/docs/flash-limited">Flash受限的GUI开发</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/using-non-memory-mapped-flash">使用非内存映射闪存存储图像</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/using-serial-flash">使用串行闪存存储图像和字体</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/fonts-in-unmapped-flash">使用非内存映射闪存存储字体数据</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/scenarios-change-pixelformat-bpp">更改应用的像素格式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/scenarios-create-at">创建TouchGFX应用模板</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/example-gpio">外部事件作为触发器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/running-without-rtos">在无RTOS的情况下基于TouchGFX硬件模板上运行项目</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/adding-files-to-stm32cubemx-projet">向STM32CubeMX工程中添加文件</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/converting-keil5-project-to-keil6">Converting a Keil compiler 5 project to Keil compiler 6</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/cmake-as-build-system">CMake as build system</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.25/zh-CN/docs/category/miscellaneous-1">其他情况</a><button aria-label="切换可折叠边栏类别“其他情况”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.25/zh-CN/docs/category/resources">资源</a><button aria-label="切换可折叠边栏类别“资源”" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_BaAN"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_lZef"><div id="doc-version-banner-identifier" class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>这是<!-- -->TouchGFX<b>4.25</b> 的文档，该版本不再被主动维护。</div><div class="margin-top--md">如需最新文档，请参阅<b><a href="https://support.touchgfx.com/docs/development/scenarios/flash-limited-gui-development" target="_blank" rel="noopener noreferrer">最新版本</a></b>。</div></div><div class="docItemContainer_xfEB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_FLLg" aria-label="面包屑导航"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.25/zh-CN/docs/development/development-introduction"><span itemprop="name">开发</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.25/zh-CN/docs/category/scenarios-2"><span itemprop="name">场景</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Flash受限的GUI开发</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_wNou theme-doc-toc-mobile tocMobile_WXEt"><button type="button" class="clean-btn tocCollapsibleButton_D5Nd">在当前页面</button></div><div class="theme-doc-markdown markdown"><header><h1>Flash受限的GUI开发</h1></header><p>本文介绍了如何利用TouchGFX开发低Flash存储器使用率的图形用户界面。</p><p>在使用TouchGFX生成代码时，像图像、文本和字体这样的资源会被转换成C++文件，然后在编程过程中与TouchGFX应用程序代码、用户代码和TouchGFX库一起存储在Flash存储中。 这意味着具有许多资源的大型或复杂项目会导致高Flash使用率。</p><p>由于大多数应用程序中的存储器资源都是有限的，因此有几种方法可以减少Flash存储器的使用率。 TouchGFX提供四项内置功能，可以帮助您显著减少应用程序的Flash存储器使用率。 这四项功能分别是L8图像格式、图像压缩、可缩放矢量图形（SVG）和矢量字体。</p><p>本文中，我们将了解如何利用这四项功能来限制应用程序占用的Flash存储器空间。 这些测量使用的是STM32U5G9J-DK2，但节约Flash空间的功能也可以应用于其他硬件平台。</p><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content"><p>有关内存管理的更多信息，请阅读<!-- -->[内存使用]<!-- --> (/basic concepts/Memory Usage.mdx) 说明。</p></div></div><h2 class="anchor anchorWithStickyNavbar_npWT" id="flash-limited-e-bike-demo">节省Flash的电动自行车演示<a href="#flash-limited-e-bike-demo" class="hash-link" aria-label="直接链接到节省Flash的电动自行车演示" title="直接链接到节省Flash的电动自行车演示">​</a></h2><p>在TouchGFX Designer中可以找到节省Flash使用率的电动自行车演示，其中说明了如何使用TouchGFX的四项功能来节省Flash空间。 该演示是STM32U5G9J-DK2板专用演示。 具有NeoChromVG GPU是STM32U5G9J-DK2的一大优势，该硬件可以加速矢量渲染。 然而，L8图像格式和图像压缩可在所有STM32 MCU中使用。</p><p>如果演示都使用未压缩的位图（无L8、压缩、SVG和矢量字体）实现，它将占用大约10.5MB的Flash存储器。 而在采用了四项节省Flash空间的功能时，演示仅占用大约800KB的Flash存储器。 由此可以看到，大量的Flash空间被节省下来。 在演示中，四项措施总共可节约92%的Flash空间。</p><h2 class="anchor anchorWithStickyNavbar_npWT" id="when-to-use-which-concept">各项功能的使用场合<a href="#when-to-use-which-concept" class="hash-link" aria-label="直接链接到各项功能的使用场合" title="直接链接到各项功能的使用场合">​</a></h2><p>有关如何使用TouchGFX四项Flash功能的技术信息和指南，请点击此处：</p><ul><li><a href="/4.25/zh-CN/docs/development/ui-development/scenarios/using-the-l8-image-format-to-reduce-memory-consumption">L8图像格式</a></li><li><a href="/4.25/zh-CN/docs/development/ui-development/touchgfx-engine-features/image-compression">图像压缩</a></li><li><a href="/4.25/zh-CN/docs/development/ui-development/touchgfx-engine-features/svg">SVG</a></li><li><a href="/4.25/zh-CN/docs/development/ui-development/touchgfx-engine-features/vector-fonts">矢量字体</a></li></ul><p>上述四项功能均可帮助减少应用程序所需的Flash存储器空间。 各项功能的使用具体取决于应用场景，但也可运用一些通用规则来判断。 现在我们将对此进行讨论。</p><h3 class="anchor anchorWithStickyNavbar_npWT" id="L8-and-compression">L8和压缩<a href="#L8-and-compression" class="hash-link" aria-label="直接链接到L8和压缩" title="直接链接到L8和压缩">​</a></h3><p>如果要在位图上使用L8图像格式，位图最多为256色。 L8格式的素材渲染会采用<a href="/4.25/zh-CN/hardware-selection/hardware-components/hardware-selection-mcu#chrom-art">Chrom ART</a>硬件加速，这意味着L8位图的渲染时间几乎与常规位图相同。 有时，与常规位图相比，以L8格式渲染位图甚至更快，这是因为从Flash存储器读取的数据更少。 与32位色深的普通位图相比，L8可以节约70%以上的Flash空间。</p><p>与L8相比，图像压缩能帮助您节约更多的Flash空间。 两种图像压缩格式：L8压缩和RGB压缩。 在位图上使用L8压缩，位图首先需要采用L8格式，因为L8压缩算法使用查色表。 所以，L8压缩位图最多256色。 有些L8压缩算法会对最大色彩量有进一步的限制。 L4最多16色，而L8 RLE最多64色。 RGB压缩不要求位图为L8格式，因此可用于所有位图。 与使用Chrom ART硬件加速的L8位图渲染相反，压缩位图（L8-和RGB压缩位图）的渲染是软件实现的，因此渲染成本更高。 压缩位图的另一个限制，是其无法用于可缩放或旋转的控件。</p><p>如果您已经拥有PNG格式的素材，则可轻松使用L8图像格式和图像压缩。 通常，您可以在最多256色的位图上使用L8图像格式，而不会有任何显著的性能损失。 如需节约更多Flash空间且渲染时间满足所需的性能，也可使用L8图像压缩。 如压缩与L8格式不兼容的位图，则可使用RGB压缩。 如需要在可伸缩或可旋转的控件中使用位图，则不能在本地使用压缩位图。 当然，有一些方法可以解决这一问题，我们稍后将进行简要介绍。</p><h3 class="anchor anchorWithStickyNavbar_npWT" id="SVG">SVG<a href="#SVG" class="hash-link" aria-label="直接链接到SVG" title="直接链接到SVG">​</a></h3><p>另一个节约Flash空间的方法是将其保存为SVG格式，而非PNG格式。 SVG对颜色的数量无限制。 然而，与L8和压缩相比，SVG的渲染成本通常更高。 因此，建议限制同时使用的SVG数量，并将包含SVG的动画保持在最少。 SVG素材越简单，占用的Flash空间就越小，并且可以获得更好的性能。 为此，建议使用单层SVG。</p><p>要在SVG控件中使用它，需要以SVG格式导入该素材。 TouchGFX无法转换此类素材。</p><h3 class="anchor anchorWithStickyNavbar_npWT" id="vector-fonts">矢量字体<a href="#vector-fonts" class="hash-link" aria-label="直接链接到矢量字体" title="直接链接到矢量字体">​</a></h3><p>对于SVG格式的非字体资产，矢量字体的渲染成本也很高，因其渲染方式与SVG相同。 矢量字体通常适用于大字体或同一种字体有多种不同尺寸的情况。 如果您有不同尺寸的矢量字体和矢量表示，只需要存储一次字体。 然后，只需要一个缩放因子便可用不同的尺寸来表示。 对于位图字体，每个字体大小都需要单独存储。 矢量字体节约的Flash空间通常不亚于图像压缩和SVG。 因此，如有必要将Flash存储器占用空间限制在绝对最小值，则应使用矢量字体。</p><h3 class="anchor anchorWithStickyNavbar_npWT" id="examples">示例<a href="#examples" class="hash-link" aria-label="直接链接到示例" title="直接链接到示例">​</a></h3><p>为了提供不同功能特征的具体示例，以常规位图、L8、L8 RLE压缩、RGB压缩和SVG格式对电动自行车演示中的两种图片进行了性能测量。 测量在STM32U5G9J-DK2上进行，素材位于内部Flash。 对于没有NeoChrom GPU的MCU，SVG的渲染时间将更长。 然而，更快的CPU可弥补这一点。</p><p>以下资产的色深为32位，是一个顶部有图标的按钮。 按钮为122 x 112像素，图标为72 x 72像素。</p><div class="figure"><a href="/4.25/zh-CN/img/development/scenarios/flash-limited-gui-development/button-with-icon.webp" target="_blank"><img src="/4.25/zh-CN/img/development/scenarios/flash-limited-gui-development/button-with-icon.webp"></a><p>电动自行车演示中带图标的按钮</p></div><p>对素材执行以下测量：</p><table><thead><tr><th><strong>格式</strong></th><th><strong>大小</strong></th><th><strong>百分比</strong></th><th><strong>渲染时间</strong></th><th><strong>CPU负荷</strong></th></tr></thead><tbody><tr><td>位图:</td><td>75.4 KB</td><td>100%</td><td>0.414 ms</td><td>2.4%</td></tr><tr><td>L8:</td><td>19.3 KB</td><td>25.6%</td><td>0.448 ms</td><td>2.3%</td></tr><tr><td>L8 RLE:</td><td>2.55 KB</td><td>3.4%</td><td>1.51 ms</td><td>9.6%</td></tr><tr><td>RGB:</td><td>4.53 KB</td><td>12.0%</td><td>1.65 ms</td><td>10.5%</td></tr><tr><td>SVG:</td><td>3.01 KB</td><td>4.0%</td><td>1.43 ms</td><td>4.1%</td></tr></tbody></table><p>由此可见，L8 RLE占用的Flash空间最少，但与常规位图格式相比，渲染时间大约要长1毫秒。</p><p>以下素材的色深为32位，是演示中仪表板页面中仪表的一部分。 150 x 436像素。</p><div class="figure"><a href="/4.25/zh-CN/img/development/scenarios/flash-limited-gui-development/gauge-part.webp" target="_blank"><img src="/4.25/zh-CN/img/development/scenarios/flash-limited-gui-development/gauge-part.webp"></a><p>电动自行车演示中仪表的一部分</p></div><p>对素材执行以下测量：</p><table><thead><tr><th><strong>格式</strong></th><th><strong>大小</strong></th><th><strong>百分比</strong></th><th><strong>渲染时间</strong></th><th><strong>CPU负荷</strong></th></tr></thead><tbody><tr><td>位图:</td><td>261.6 KB</td><td>100%</td><td>1.15 ms</td><td>1.5%</td></tr><tr><td>L8:</td><td>65.6 KB</td><td>25.1%</td><td>1.24 ms</td><td>1.4%</td></tr><tr><td>L8 RLE:</td><td>4.66 KB</td><td>1.78%</td><td>2.75 ms</td><td>15.0%</td></tr><tr><td>RGB:</td><td>10.5 KB</td><td>4.01%</td><td>3.08 ms</td><td>17.6%</td></tr><tr><td>SVG:</td><td>0.686 KB</td><td>0.27%</td><td>3.40 ms</td><td>2.0%</td></tr></tbody></table><p>SVG格式的资源占用的Flash空间最少，但渲染成本也最高。</p><h3 class="anchor anchorWithStickyNavbar_npWT" id="concept-conclusion">结论<a href="#concept-conclusion" class="hash-link" aria-label="直接链接到结论" title="直接链接到结论">​</a></h3><p>如上所述，没有一种格式适合所有资产。 然而，单就节约Flash空间而言，当素材相对较小时，L8图像压缩通常占用的Flash空间最小，而当素材较大时，SVG占用的Flash空间最小。 尽管SVG资产的颜色可以超过256色，但出于Flash存储器使用和性能方面的考虑，仍然建议SVG资产保持相对简单。 在L8、图像压缩和SVG中，L8图像格式占用的Flash空间最大，但L8的渲染时间最短。</p><p>因此，在开发Flash资源有限的应用程序时，您需要确定瓶颈并确定什么对您的应用程序最重要。 性能还是Flash存储器空间节约量？ 如果是性能，L8将是最有效的方法。 如果性能允许，L8甚至可以与某些素材的压缩相结合。 如果需要尽可能小的Flash占用空间，那么建议使用图像压缩和SVG。</p><h2 class="anchor anchorWithStickyNavbar_npWT" id="smart-assets">使用“智能”素材<a href="#smart-assets" class="hash-link" aria-label="直接链接到使用“智能”素材" title="直接链接到使用“智能”素材">​</a></h2><p>使用“智能”素材可提高Flash空间节约量和性能。 在这里，智能素材指的是素材本身及其用途。</p><h3 class="anchor anchorWithStickyNavbar_npWT" id="simple-assets">简单素材<a href="#simple-assets" class="hash-link" aria-label="直接链接到简单素材" title="直接链接到简单素材">​</a></h3><p>首先，素材越简单，可压缩的素材就越多，SVG定义也就越简单， 最终占用的Flash空间会更小。</p><p>作为参考，在电动自行车演示中，所有位图资产最多为64色，并且由于这些素材也非常适合L8 RLE，因此所有位图素材都经过L8 RLE压缩。 由于L8 RLE的渲染速度比L8 LZW9更快，因而也能达到理想性能。</p><p>此外，如果设计本身较为简单，那么在某些情况下也可使用<a href="/4.25/zh-CN/ui-development/ui-components/images/tiled-image">平铺图像</a>。 然后，您只需要存储图像的一部分，便可重复存储。</p><h3 class="anchor anchorWithStickyNavbar_npWT" id="using-boxes">使用boxes<a href="#using-boxes" class="hash-link" aria-label="直接链接到使用boxes" title="直接链接到使用boxes">​</a></h3><p>另一种以智能方式节约Flash存储器空间的方法是使用<a href="/4.25/zh-CN/ui-development/ui-components/shapes/box">Box控件</a>。 使用boexes有两大优势：</p><ol><li>首先，box将直接绘制在帧缓冲器中。 因此，无需Flash存储器来储存box。 对Flash的唯一影响来自定义box所需的少量代码。</li><li>其次，box可调整且可在运行时改变颜色和大小。 在Flash有限的电动自行车演示中，box用于纯色背景等，通过改变方框颜色即可支持亮/暗模式。</li></ol><h3 class="anchor anchorWithStickyNavbar_npWT" id="reusable-assets">可重复使用的素材<a href="#reusable-assets" class="hash-link" aria-label="直接链接到可重复使用的素材" title="直接链接到可重复使用的素材">​</a></h3><p>另一种节约Flash存储器空间的方法是限制素材总数。 当然，这可以通过非常简单的设计来实现，但有时也可以通过多次重复使用同一素材来限制现有的素材数量。</p><p>例如，在Flash使用率有限的电动自行车演示中，该方法可用于天气页面。 天气图标是经过缩放可适应所有3种尺寸的相同资源。 由于它是一种缩放资产，因此SVG格式优于压缩格式，即使RLE的Flash占用空间较小。 然而，如果素材以RLE格式存储在所有3种大小中，则Flash空间的总占用量将更大。</p><p>此外，这些按钮还能作为可重复使用的素材来实现。 例如，将按钮与其图标分开，以便重复使用。</p><p>在演示中可重复使用的另一个例子是背景。 演示中总共有5种不同的背景设计，但通过使用可调整的素材（Box和可重复使用的素材），所有背景仅需一项素材和一Box即可创建。</p><h2 class="anchor anchorWithStickyNavbar_npWT" id="performance">提高性能<a href="#performance" class="hash-link" aria-label="直接链接到提高性能" title="直接链接到提高性能">​</a></h2><p>开发Flash使用率有限的应用程序时，存在降低性能的风险。 但是，如有可用的备用RAM，则有办法提高应用程序的性能。 通过使用<a href="/4.25/zh-CN/ui-development/touchgfx-engine-features/dynamic-bitmaps">动态位图</a>和<a href="/4.25/zh-CN/ui-development/scenarios/achieving-better-performance-with-cacheable-container">可缓存容器</a>，将素材或容器的静态快照绘制到RAM中。 之后，无论何时使用资产或容器，均可用缓存版本。 缓存版本只是RAM中的一个位图，这意味着渲染时间与渲染常规位图相同。</p><p>在限制Flash使用率受限的电动自行车演示中，可缓存容器用于滚动SVG资产和矢量字体，同时保持良好的性能。</p><div class="figure"><a href="/4.25/zh-CN/img/development/scenarios/flash-limited-gui-development/cacheable-container.webp" target="_blank"><img width="500" src="/4.25/zh-CN/img/development/scenarios/flash-limited-gui-development/cacheable-container.webp"></a><p>天气元素作为可缓存容器</p></div><p>通常，矢量字体在运行时移动或可移动时都会被缓存。 由此确保了在滚动矢量字体的情况下至少有30 FPS。</p><p>演示中使用的另一个技巧是将压缩位图解压缩到位图缓存中。 通过将位图解压缩到RAM，就可以在缩放或旋转的控件中使用此位图了。 当位图被解压缩时，TouchGFX引用位图ID时将始终使用解压缩的缓存版本。 下面是电动自行车演示的一个例子。 压缩的位图被简单地解压缩之后，便可以像常规位图那样使用。</p><div class="code-header"><div><h5>StartView.cpp</h5></div></div><div class="language-cpp codeBlockContainer_wdCH theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_NZw4"><pre tabindex="0" class="prism-code language-cpp codeBlock_Q0k3 thin-scrollbar"><code class="codeBlockLines_hUh3"><span class="token-line" style="color:#bfc7d5"><span class="token class-name" style="color:rgb(255, 203, 107)">StartView</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">StartView</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">Bitmap</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">decompress</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">BITMAP_MAIN_RIPPLE_LEFT_ID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">     </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Decompress compressed image to bitmap cache</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">Bitmap</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">decompress</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">BITMAP_MAIN_RIPPLE_RIGHT_ID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Decompress compressed image to bitmap cache</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">StartView</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">setupScreen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    leftMainRippleScale</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setBitmap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">BITMAP_MAIN_RIPPLE_LEFT_ID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Set bitmap for Scalable Image</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rightMainRippleScale</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setBitmap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">BITMAP_MAIN_RIPPLE_RIGHT_ID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Set bitmap for Scalable Image</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    leftMainRippleScale</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setWidthHeight</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">       </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Set scale of image</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rightMainRippleScale</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">setWidthHeight</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Set scale of image</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup_ibJ8"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_pv0M" aria-hidden="true"><svg class="copyButtonIcon_nHt1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_HEug" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>由于广泛使用动态位图，Flash使用率受限的电动自行车演示需要922KB的位图缓存。 这意味着需要大量的备用RAM。 然而，该演示也将Flash空间节约到了一个相当极端的程度。 在更简单的应用程序或性能要求不那么重要的应用程序中，可以使用更小的位图缓存。</p><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content"><p><a href="/4.25/zh-CN/docs/development/ui-development/touchgfx-engine-features/dynamic-bitmaps">Dynamic Bitmaps</a></p><p><a href="/4.25/zh-CN/docs/development/ui-development/scenarios/achieving-better-performance-with-cacheable-container">Achieving Better Performance with Cacheable Container</a></p><p><a href="/4.25/zh-CN/docs/development/ui-development/touchgfx-engine-features/image-compression">Decompressing images to the bitmap cache</a></p></div></div><h2 class="anchor anchorWithStickyNavbar_npWT" id="conclusion">结论<a href="#conclusion" class="hash-link" aria-label="直接链接到结论" title="直接链接到结论">​</a></h2><p>在本文中，我们了解了如何节省TouchGFX应用程序的Flash用量。</p><p>4项Flash节约功能可在所有STM32硬件平台上使用，但请记住，SVG和矢量字体的渲染成本很高。 所以，如果没有矢量渲染的硬件加速或额外的计算能力，性能可能会因此降低。</p><p>限制Flash使用率GUI开发的功能可能会导致性能损失，但可以通过使用动态位图和可缓存容器来提高性能。</p><p>Flash空间节约功能使节约Flash空间拥有巨大的潜力。 这些功能可节约的实际Flash量取决于具体的应用，而对于Flash使用率受限的电动自行车演示，可节约92%的使用率。</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档页面导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/4.25/zh-CN/docs/development/scenarios/lowering-memory-usage-with-partial-framebuffer"><div class="pagination-nav__sublabel">上一个</div><div class="pagination-nav__label">通过部分帧缓冲降低内存使用率</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/4.25/zh-CN/docs/development/scenarios/using-non-memory-mapped-flash"><div class="pagination-nav__sublabel">下一个</div><div class="pagination-nav__label">使用非内存映射闪存存储图像</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_SRp5 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#flash-limited-e-bike-demo" class="table-of-contents__link toc-highlight">节省Flash的电动自行车演示</a></li><li><a href="#when-to-use-which-concept" class="table-of-contents__link toc-highlight">各项功能的使用场合</a><ul><li><a href="#L8-and-compression" class="table-of-contents__link toc-highlight">L8和压缩</a></li><li><a href="#SVG" class="table-of-contents__link toc-highlight">SVG</a></li><li><a href="#vector-fonts" class="table-of-contents__link toc-highlight">矢量字体</a></li><li><a href="#examples" class="table-of-contents__link toc-highlight">示例</a></li><li><a href="#concept-conclusion" class="table-of-contents__link toc-highlight">结论</a></li></ul></li><li><a href="#smart-assets" class="table-of-contents__link toc-highlight">使用“智能”素材</a><ul><li><a href="#simple-assets" class="table-of-contents__link toc-highlight">简单素材</a></li><li><a href="#using-boxes" class="table-of-contents__link toc-highlight">使用boxes</a></li><li><a href="#reusable-assets" class="table-of-contents__link toc-highlight">可重复使用的素材</a></li></ul></li><li><a href="#performance" class="table-of-contents__link toc-highlight">提高性能</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">结论</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">保留所有权利 © 2024 STMicroelectronics | <a href="https://www.st.com/content/st_com/en/common/terms-of-use.html">使用条款</a> | <a href="https://www.st.com/content/st_com/en/common/privacy-policy.html">隐私策略</a> | <a href="/docs/miscellaneous/cookie-policy">Cookie政策</a> | <a href="https://app-de.onetrust.com/app/#/webform/2b87200d-4023-4588-9df7-ab0cdea1a67e">行使您的权利</a></div></div></div></footer></div></div>
<script src="/4.25/zh-CN/assets/js/runtime~main.abcc4669.js"></script>
<script src="/4.25/zh-CN/assets/js/main.cf98cd31.js"></script>
</body>
</html>