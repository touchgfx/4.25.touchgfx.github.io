<!doctype html>
<html lang="zh-CN" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-development/scenarios/running-graphics-on-stm32h7r" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">STM32H7R7/S7图形处理性能 | TouchGFX Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://support.touchgfx.com/4.25/zh-CN/img/meta-image.png"><meta data-rh="true" name="twitter:image" content="https://support.touchgfx.com/4.25/zh-CN/img/meta-image.png"><meta data-rh="true" property="og:url" content="https://support.touchgfx.com/4.25/zh-CN/docs/development/scenarios/running-graphics-on-stm32h7r"><meta data-rh="true" name="docusaurus_locale" content="zh-CN"><meta data-rh="true" name="docsearch:language" content="zh-CN"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="STM32H7R7/S7图形处理性能 | TouchGFX Documentation"><meta data-rh="true" name="description" content="本文探讨了STM32H7R/S系列MCU的特殊架构，以及其在图形处理应用中需注意的关键事项。 但大部分技术要点同样适用于所有需要外接RAM和Flash的STM32 MCU。"><meta data-rh="true" property="og:description" content="本文探讨了STM32H7R/S系列MCU的特殊架构，以及其在图形处理应用中需注意的关键事项。 但大部分技术要点同样适用于所有需要外接RAM和Flash的STM32 MCU。"><link data-rh="true" rel="icon" href="/4.25/zh-CN/img/favicon.png"><link data-rh="true" rel="canonical" href="https://support.touchgfx.com/4.25/zh-CN/docs/development/scenarios/running-graphics-on-stm32h7r"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/docs/development/scenarios/running-graphics-on-stm32h7r" hreflang="en"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/ko/docs/development/scenarios/running-graphics-on-stm32h7r" hreflang="ko"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/ja/docs/development/scenarios/running-graphics-on-stm32h7r" hreflang="ja"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/zh-CN/docs/development/scenarios/running-graphics-on-stm32h7r" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/zh-TW/docs/development/scenarios/running-graphics-on-stm32h7r" hreflang="zh-TW"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/docs/development/scenarios/running-graphics-on-stm32h7r" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://B8LNOI0XWD-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="TouchGFX Documentation" href="/4.25/zh-CN/opensearch.xml">


<script src="/4.25/zh-CN/js/one-trust.js"></script>
<script src="/4.25/js/fix-location.js"></script><link rel="stylesheet" href="/4.25/zh-CN/assets/css/styles.6e57ba1f.css">
<link rel="preload" href="/4.25/zh-CN/assets/js/runtime~main.b8bbc017.js" as="script">
<link rel="preload" href="/4.25/zh-CN/assets/js/main.b4250658.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><div role="region" aria-label="跳转到主要内容"><a class="skipToContent_xAYN" href="#__docusaurus_skipToContent_fallback">跳转到主要内容</a></div><nav aria-label="主要" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/4.25/zh-CN/docs/introduction/welcome"><div class="navbar__logo"><img src="/4.25/zh-CN/img/logo.svg" alt="TouchGFX" class="themedImage_m0dh themedImage--light_OZkp"><img src="/4.25/zh-CN/img/logo.svg" alt="TouchGFX" class="themedImage_m0dh themedImage--dark_ViMM"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/4.25/zh-CN/docs/introduction/welcome">文档</a><a class="navbar__item navbar__link" href="/4.25/zh-CN/docs/api/namespacetouchgfx">API</a><a class="navbar__item navbar__link" sidebarid="academy" href="/4.25/zh-CN/academy/academy-introduction">TouchGFX 学院</a><a href="https://community.st.com/s/topic/0TO0X0000003iw6WAA/touchgfx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">社区</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/4.25/zh-CN/docs/introduction/welcome">4.25</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/4.25/zh-CN/docs/development/scenarios/running-graphics-on-stm32h7r">4.25</a></li><li><a href="https://support.touchgfx.com/4.25" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.25<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.24" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.24<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.23" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.23<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.22" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.22<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.21" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.21<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.20" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.20<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.19" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.19<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.18" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.18<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.17" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.17<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.16" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.16<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.15" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.15<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.14" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.14<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.13" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.13<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_vrp6"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">简体中文</a><ul class="dropdown__menu"><li><a href="/4.25/docs/development/scenarios/running-graphics-on-stm32h7r" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/4.25/ko/docs/development/scenarios/running-graphics-on-stm32h7r" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ko">한국어</a></li><li><a href="/4.25/ja/docs/development/scenarios/running-graphics-on-stm32h7r" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja">日本語</a></li><li><a href="/4.25/zh-CN/docs/development/scenarios/running-graphics-on-stm32h7r" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-CN">简体中文</a></li><li><a href="/4.25/zh-TW/docs/development/scenarios/running-graphics-on-stm32h7r" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-TW">繁體中文</a></li></ul></div><div class="searchBox_y6an"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_ovZa docsWrapper_a09d"><button aria-label="滚动返回顶部" class="clean-btn theme-back-to-top-button backToTopButton_PCdr" type="button"></button><div class="docPage_CL8Z"><aside class="theme-doc-sidebar-container docSidebarContainer_ThtD"><div class="sidebarViewport_mAJy"><div class="sidebar_Oq1e"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_M44W"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.25/zh-CN/docs/category/introduction">介绍</a><button aria-label="切换可折叠边栏类别“介绍”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.25/zh-CN/docs/category/basic-concepts">基本概念</a><button aria-label="切换可折叠边栏类别“基本概念”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/4.25/zh-CN/docs/development/development-introduction">开发</a><button aria-label="切换可折叠边栏类别“开发”" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.25/zh-CN/docs/development/hardware-selection/hardware-selection-introduction">硬件选择</a><button aria-label="切换可折叠边栏类别“硬件选择”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.25/zh-CN/docs/development/board-bring-up/board-introduction">驱动板卡</a><button aria-label="切换可折叠边栏类别“驱动板卡”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.25/zh-CN/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction">TouchGFX AL开发</a><button aria-label="切换可折叠边栏类别“TouchGFX AL开发”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.25/zh-CN/docs/development/ui-development/ui-development-introduction">UI开发</a><button aria-label="切换可折叠边栏类别“UI开发”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/4.25/zh-CN/docs/category/scenarios-2">场景</a><button aria-label="切换可折叠边栏类别“场景”" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/touchgfx-on-lowcost-hardware">低成本硬件上的TouchGFX</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/touchgfx-on-gpu2d">NeoChrom/NeoChromVG在TouchGFX中的应用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/running-graphics-on-stm32h7r">STM32H7R7/S7图形处理性能</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/running-graphics-from-external-ram">从外部RAM运行图形</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/lowering-memory-usage-with-partial-framebuffer">通过部分帧缓冲降低内存使用率</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/flash-limited">Flash受限的GUI开发</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/using-non-memory-mapped-flash">使用非内存映射闪存存储图像</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/using-serial-flash">使用串行闪存存储图像和字体</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/fonts-in-unmapped-flash">使用非内存映射闪存存储字体数据</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/scenarios-change-pixelformat-bpp">更改应用的像素格式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/scenarios-create-at">Creating a TouchGFX Board Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/example-gpio">外部事件作为触发器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/running-without-rtos">在无RTOS的情况下基于TouchGFX硬件模板上运行项目</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/adding-files-to-stm32cubemx-projet">向STM32CubeMX工程中添加文件</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/converting-keil5-project-to-keil6">将Keil编译器5项目转换为Keil编译器6</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/cmake-as-build-system">CMake作为编译系统</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.25/zh-CN/docs/category/miscellaneous-1">其他情况</a><button aria-label="切换可折叠边栏类别“其他情况”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.25/zh-CN/docs/category/resources">资源</a><button aria-label="切换可折叠边栏类别“资源”" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_fxxJ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_QTf6"><div id="doc-version-banner-identifier" class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>这是<!-- -->TouchGFX<b>4.25</b> 的文档，该版本不再被主动维护。</div><div class="margin-top--md">如需最新文档，请参阅<b><a href="https://support.touchgfx.com/docs/development/scenarios/running-graphics-on-stm32h7r" target="_blank" rel="noopener noreferrer">最新版本</a></b>。</div></div><div class="docItemContainer_yTh1"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer__o78" aria-label="面包屑导航"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.25/zh-CN/docs/development/development-introduction"><span itemprop="name">开发</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.25/zh-CN/docs/category/scenarios-2"><span itemprop="name">场景</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">STM32H7R7/S7图形处理性能</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_CArF theme-doc-toc-mobile tocMobile_PMGv"><button type="button" class="clean-btn tocCollapsibleButton_I8Hj">在当前页面</button></div><div class="theme-doc-markdown markdown"><header><h1>STM32H7R7/S7图形处理性能</h1></header><p>本文探讨了STM32H7R/S系列MCU的特殊架构，以及其在图形处理应用中需注意的关键事项。 但大部分技术要点同样适用于所有需要外接RAM和Flash的STM32 MCU。</p><p>鉴于STM32H7R/S属于高性能MCU，本文并非关于如何创建TouchGFX开发板设置 (TBS) 的入门指南。 本文仅深入探讨STM32H7R/S特有的关键技术领域。 有关如何创建TouchGFX TBS的通用指南，请参见<a href="/4.25/zh-CN/docs/development/board-bring-up/board-introduction">驱动板卡指南</a>。<br>
<!-- -->有关STM32H7R7/S7的更多信息，请访问<a href="https://www.st.com/en/microcontrollers-microprocessors/stm32h7r7-7s7.html" target="_blank" rel="noopener noreferrer">产品页面</a>或查看<a href="https://www.youtube.com/playlist?list=PLnMKNibPkDnF2fL7nhQ08V0bPi2poXVpH" target="_blank" rel="noopener noreferrer">包含完整STM32H7RSYouTube演示研讨会的YouTube专题列表</a>。</p><p>TouchGFX Designer已集成STM32H7S78开发板的TBS支持包，该包提供了在STM32H7R/S上运行TouchGFX的完整示例项目。 开发人员可直接将此TBS作为STM32H7R/S TouchGFX应用开发的参考模板。 该项目基于STM32CubeMX构建，通过打开STM32H7S78-DK.ioc文件即可获得缓存、MPU、外部存储器等的推荐配置。</p><div class="figure"><a href="/4.25/zh-CN/img/development/scenarios/running-graphics-on-stm32h7r/stm32h7s-tbs.png" target="_blank"><img src="/4.25/zh-CN/img/development/scenarios/running-graphics-on-stm32h7r/stm32h7s-tbs.png"></a><p>TouchGFX Designer中可用的板级支持包配置界面</p></div><h2 class="anchor anchorWithStickyNavbar_k1OW" id="存储器配置方案">存储器配置方案<a href="#存储器配置方案" class="hash-link" aria-label="直接链接到存储器配置方案" title="直接链接到存储器配置方案">​</a></h2><p>STM32H7R/S是一款bootflash MCU。 带bootflash的MCU是指内置小型Flash用于存储自举程序的微控制器，主应用程序及相关资源则存储在外部存储器中。 STM32H7R/S还集成620 KB嵌入式SRAM。 因此，STM32H7R/S在图形处理应用中，需同时使用外部RAM和Flash。 由于外部存储器工作频率通常仅为CPU频率的1/2或1/3，其带宽往往成为系统瓶颈。 对于STM32H7R7/S7，其两个XSPI接口（16位和8位）在双倍传输速率模式下最高可运行至200 MHz，而FMC接口（16位或32位）的最高运行频率为100 MHz。</p><h3 class="anchor anchorWithStickyNavbar_k1OW" id="外部存储器管理器">外部存储器管理器<a href="#外部存储器管理器" class="hash-link" aria-label="直接链接到外部存储器管理器" title="直接链接到外部存储器管理器">​</a></h3><p>STM32CubeMX在“分类 → 中间件和软件包”目录下提供了“外部存储器管理器”和“外部存储器加载器”两个工具。 这些工具旨在协助开发者在bootflash或无Flash应用场景下完成外部存储器的配置工作。 这些工具能够显著简化外部加载器的创建流程，并提供应用程序类型选择等便捷功能。 有关工具的使用详情见<a href="https://wiki.st.com/stm32mcu/wiki/Getting_started_with_External_memory_Manager_and_External_memory_loader" target="_blank" rel="noopener noreferrer">此处</a>。 此外，ST即将发布技术文章“STM32外部串行存储器简介”。</p><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content"><p><a href="https://wiki.st.com/stm32mcu/wiki/Getting_started_with_External_memory_Manager_and_External_memory_loader" target="_blank" rel="noopener noreferrer">外部存储器管理器与加载器入门指南</a></p></div></div><h3 class="anchor anchorWithStickyNavbar_k1OW" id="外部ram中的帧缓存">外部RAM中的帧缓存<a href="#外部ram中的帧缓存" class="hash-link" aria-label="直接链接到外部RAM中的帧缓存" title="直接链接到外部RAM中的帧缓存">​</a></h3><p>在外部RAM中配置帧缓存时，内存带宽需求与限制是需要首要考虑的关键因素。 由于显示屏未集成GRAM，系统必须持续按照显示屏指定的刷新率传输帧缓存数据。 探索套件所配显示屏的刷新率为60 Hz。 这将导致外部RAM接口的大部分带宽被LTDC的帧缓存更新操作占用。 LTDC的带宽需求可通过以下公式计算：</p><p>像素时钟 (LCD_CLK) = 总屏幕像素数 × 刷新率<br>
<!-- -->单个LTDC层带宽需求 = LCD_CLK × Bpp</p><p>此外，DMA2D和GPU2D在帧缓存上执行操作时也需占用外部RAM带宽。 若内存同时用于其他用途（如运行应用程序代码），可用带宽将进一步受限。<br>
<!-- -->这些因素叠加会导致外部RAM总线过载。</p><p><a href="/4.25/zh-CN/docs/development/scenarios/running-graphics-from-external-ram">在此</a>阅读文章，了解在外部RAM中运行带有帧缓存的图形时的注意事项。</p><p>如需详细了解LTDC显示接口及外部RAM帧缓存的限制条件与技术要点，请参见<a href="https://www.st.com/resource/en/application_note/an4861-introduction-to-lcdtft-display-controller-ltdc-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">“LTDC应用笔记”</a>。 建议重点关注第5章“基于LTDC的图形应用程序开发”和第7章“LTDC应用示例”。<br>
<!-- -->若外部RAM带宽已达极限，请参考第5.5.2节“外部存储器帧缓存读取优化”及第5.5.3节“SDRAM帧缓存读取优化”。</p><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content"><ul><li><a href="/4.25/zh-CN/docs/development/scenarios/running-graphics-from-external-ram">从外部RAM运行图形</a></li><li><a href="https://www.st.com/resource/zh/application_note/an4861-introduction-to-lcdtft-display-controller-ltdc-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">AN4861：STM32微控制器LCD-TFT显示控制器(LTDC)技术手册</a></li></ul></div></div><h3 class="anchor anchorWithStickyNavbar_k1OW" id="紧耦合存储器">紧耦合存储器<a href="#紧耦合存储器" class="hash-link" aria-label="直接链接到紧耦合存储器" title="直接链接到紧耦合存储器">​</a></h3><p>STM32H7R/S Cortex-M7支持64位宽零等待周期直接访问紧耦合存储器 (TCM)。 该架构可提供多达192 KB的数据TCM (DTCM) 和指令TCM (ITCM) 容量。 ITCM和DTCM分别是数据读写与指令提取的最佳存储区域。 因此，ITCM应被用于执行确定性极高的关键代码，例如不能等待缓存失效的中断处理程序，以及关键控制循环等场景。 在使用RTOS的实时应用中，堆通常会被高频使用。 因此建议将RTOS的栈和堆分配至DTCM。 若有剩余空间，全局变量亦可存放于此区域。</p><p>需特别注意，ITCM和DTCM会占用SRAM1和SRAM3的部分内存空间。 这意味着启用ITCM和DTCM时，内部SRAM的可用容量会减少。</p><div class="figure"><a href="/4.25/zh-CN/img/development/scenarios/running-graphics-on-stm32h7r/tcm-illustration.png" target="_blank"><img src="/4.25/zh-CN/img/development/scenarios/running-graphics-on-stm32h7r/tcm-illustration.png"></a><p>STM32H7R/S紧耦合存储器示意图</p></div><p>与其他H7系列MCU相同，STM32H7R/S配备一级 (L1) 缓存。 有关L1缓存的详细信息，请参见<a href="https://www.st.com/resource/en/application_note/an4839-level-1-cache-on-stm32f7-series-and-stm32h7-series-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">“H7缓存应用笔记”</a>。 请重点参考第4章：“常见误区与优化建议”。</p><p>关于外部SPI存储器的配置详情，请参考<a href="https://www.st.com/resource/en/application_note/an5050-getting-started-with-octospi-hexadecaspi-and-xspi-interface-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">“OSPI、HSPI及XSPI接口应用指南”</a>。</p><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content"><ul><li><a href="https://www.st.com/resource/zh/application_note/an6062-introduction-to-stm32h7rx7sx-system-architecture-and-performance-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">AN6062：STM32H7Rx/7Sx系统架构与性能简介</a></li><li><a href="https://www.st.com/resource/zh/application_note/an4839-level-1-cache-on-stm32f7-series-and-stm32h7-series-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">AN4839：STM32F7/H7系列的L1缓存技术</a></li><li><a href="https://www.st.com/resource/zh/application_note/an5050-getting-started-with-octospi-hexadecaspi-and-xspi-interface-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">AN5050：STM32 MCU上Octo-SPI/Hexadeca-SPI/XSPI接口入门指南</a></li></ul></div></div><h2 class="anchor anchorWithStickyNavbar_k1OW" id="应用程序类型">应用程序类型<a href="#应用程序类型" class="hash-link" aria-label="直接链接到应用程序类型" title="直接链接到应用程序类型">​</a></h2><p>在启动过程中，自举程序会根据所选应用程序类型执行不同操作。 它既可以指向外部Flash中已存在的应用程序，也可以将应用程序加载到另一内存（通常是外部RAM）中。<br>
<!-- -->执行外部Flash中已存在的应用程序称为就地执行 (XiP)。 在启动过程中将应用程序从Flash复制到RAM，再从RAM执行的操作称为加载运行 (LRUN)。</p><p>若应用程序已加密，则只能使用LRUN。 有关STM32加密的更多信息，请参见<a href="https://www.st.com/resource/en/application_note/an6088-how-to-use-mce-for-encryptiondecryption-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">加密应用笔记</a>。</p><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content"><p><a href="https://www.st.com/resource/zh/application_note/an6088-how-to-use-mce-for-encryptiondecryption-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">AN6088：如何在STM32 MCU上使用MCE进行加密/解密</a></p></div></div><h3 class="anchor anchorWithStickyNavbar_k1OW" id="就地执行-xip">就地执行 (XiP)<a href="#就地执行-xip" class="hash-link" aria-label="直接链接到就地执行 (XiP)" title="直接链接到就地执行 (XiP)">​</a></h3><p>下图以图形应用程序为例展示XiP的内存布局。 XiP为默认应用类型。</p><div class="figure"><a href="/4.25/zh-CN/img/development/scenarios/running-graphics-on-stm32h7r/xip-illustration.png" target="_blank"><img src="/4.25/zh-CN/img/development/scenarios/running-graphics-on-stm32h7r/xip-illustration.png"></a><p>图形应用的XiP示意图</p></div><p>如XiP示意图所示，外部Flash通过OctoSPI接口同时提供应用程序代码和图形资源的访问。 CPU持续访问应用代码，可能导致NeoChrom GPU或Chrom-ART访问资源时出现延迟。 这会显著影响图形处理性能。 为缓解此问题，强烈建议运行XiP时启用外部Flash的指令缓存功能。 如此可实现重复指令直接从缓存而非外部Flash读取，从而减轻带宽负载并提升外部Flash接口访问效率。</p><h3 class="anchor anchorWithStickyNavbar_k1OW" id="加载运行-lrun">加载运行 (LRUN)<a href="#加载运行-lrun" class="hash-link" aria-label="直接链接到加载运行 (LRUN)" title="直接链接到加载运行 (LRUN)">​</a></h3><p>下图展示了图形应用中LRUN模式的对应示例。</p><div class="figure"><a href="/4.25/zh-CN/img/development/scenarios/running-graphics-on-stm32h7r/lrun-illustration.png" target="_blank"><img src="/4.25/zh-CN/img/development/scenarios/running-graphics-on-stm32h7r/lrun-illustration.png"></a><p>LRUN图形应用示例</p></div><p>如LRUN示意图所示，应用程序代码与图形资源实现了物理分离，从而改善了资源访问效率。 但同时也意味着外部RAM接口将承担更大负载，因为访问帧缓存和应用程序代码都需要该接口。 在此配置下，强烈建议启用外部RAM接口的指令缓存功能。</p><p>在STM32H7R/S上采用LRUN模式运行图形应用时，需重点关注以下性能优化事项：<br>
<!-- -->首先，建议将位图、字体等资源保留在外部Flash中。 由于资源会被频繁访问，将其存储在外部RAM中会显著增加外部RAM的带宽负载。 此外，图形资源通常无需加密处理。<br>
<!-- -->其次，如下图所示，建议评估将应用程序代码存入内部SRAM的可行性。 由于内部总线的传输速率更高，相较于将应用程序代码存储在外部Flash或RAM中，从内部SRAM访问和执行速度更快。 STM32H7R/S连接内部SRAM的AXI总线运行速度可达300 MHz。 此外，该配置允许将图形资源、帧缓存和应用程序代码分别存储于三个独立区域，从而将带宽负载分散到三条独立总线。</p><div class="figure"><a href="/4.25/zh-CN/img/development/scenarios/running-graphics-on-stm32h7r/lrun-intram-illustration.png" target="_blank"><img src="/4.25/zh-CN/img/development/scenarios/running-graphics-on-stm32h7r/lrun-intram-illustration.png"></a><p>LRUN图形应用示意图（应用程序代码位于内部RAM中）</p></div><h3 class="anchor anchorWithStickyNavbar_k1OW" id="性能比较">性能比较<a href="#性能比较" class="hash-link" aria-label="直接链接到性能比较" title="直接链接到性能比较">​</a></h3><p>以下分别展示了采用XiP和LRUN模式的复杂GUI应用案例。 LRUN应用程序的应用代码存储在内部SRAM中。 比较结果表明不同配置对MCU负载的影响机制。 通过将TouchGFX框架和应用程序置于内部SRAM，减少了从外部RAM和Flash中获取数据所需的周期数，从而有效降低MCU负载。<br>
<!-- -->参考模型为STM32H7S78-DK开发板预装演示程序。</p><div class="figure"><a href="/4.25/zh-CN/img/development/scenarios/running-graphics-on-stm32h7r/lrun-xip-comparison.png" target="_blank"><img src="/4.25/zh-CN/img/development/scenarios/running-graphics-on-stm32h7r/lrun-xip-comparison.png"></a><p>LRUN和XiP应用的MCU负载比较</p></div><p>比较结果表明，当应用代码置于内部SRAM时MCU负载会降低。 与XiP相比，采用LRUN模式MCU负载可减少约50%。</p><p>比较结果表明，当应用代码置于内部SRAM时MCU负载会显著降低。 这是由于内部SRAM相比外部RAM和Flash具有更快的访问速度。 相较于XiP模式，采用LRUN运行模式并结合内部SRAM存储应用代码可使MCU负载减少50%。 将应用代码存储于内部SRAM的LRUN方案可提供最佳性能。 但该配置仅在应用代码容量适配可用内部SRAM时才可行。</p><h2 class="anchor anchorWithStickyNavbar_k1OW" id="mpu-配置">MPU 配置<a href="#mpu-配置" class="hash-link" aria-label="直接链接到MPU 配置" title="直接链接到MPU 配置">​</a></h2><p>内存保护单元 (MPU) 用于保护存储区域，防止非预期的内存访问和执行操作。<br>
<!-- -->在Arm® Cortex®-M7处理器上，必须防止对外部存储器的推测性访问，否则可能引发高延迟或系统错误。 对于STM32H7R/S，这将影响访问内存的AXI主设备，并显著降低图形性能。<br>
<!-- -->MPU可通过控制可访问的地址范围来防止推测性读取访问。 最简单的方法是使用包含整个内存区域的背景区域，通过将其设置为“强排序，永不执行”来限制访问。</p><p>背景区域应定义在默认区域ID-1中，因为所有其他区域的优先级都将高于此区域。 然后，应为需要访问的内存区域定义具有相应设置的其他MPU区域。 在STM32H7R/S上最多可定义16个区域。</p><p>STM32H7S78 DK TBS的MPU配置如下。 此配置可用作参考。</p><table><thead><tr><th><strong>区域0</strong></th><th><strong>全部</strong></th><th><strong>注</strong></th></tr></thead><tbody><tr><td><em>属性</em></td><td><em>值</em></td><td></td></tr><tr><td>MPU区域基址</td><td>0x0</td><td></td></tr><tr><td>MPU区域大小</td><td>4 GB</td><td>覆盖MCU的整个内存区域</td></tr><tr><td>MPU子区域禁用</td><td>0x0</td><td></td></tr><tr><td>MPU TEX字段级别</td><td>0级</td><td></td></tr><tr><td>MPU访问权限</td><td>禁止所有访问</td><td>限制所有访问操作</td></tr><tr><td>MPU指令访问</td><td>DISABLE</td><td></td></tr><tr><td>MPU可共享权限</td><td>ENABLE</td><td></td></tr><tr><td>MPU可缓存权限</td><td>DISABLE</td><td></td></tr><tr><td>MPU可缓冲权限</td><td>DISABLE</td><td></td></tr></tbody></table><table><thead><tr><th><strong>区域1</strong></th><th><strong>外部Flash</strong></th><th><strong>注</strong></th></tr></thead><tbody><tr><td><em>属性</em></td><td><em>值</em></td><td></td></tr><tr><td>MPU区域基址</td><td>0x70000000</td><td>XSPI2（外部Flash）的基址</td></tr><tr><td>MPU区域大小</td><td>128 MB</td><td>板载128 MB外部Flash</td></tr><tr><td>MPU子区域禁用</td><td>0x0</td><td></td></tr><tr><td>MPU TEX字段级别</td><td>1级</td><td></td></tr><tr><td>MPU访问权限</td><td>允许所有访问</td><td></td></tr><tr><td>MPU指令访问</td><td>DISABLE</td><td></td></tr><tr><td>MPU可共享权限</td><td>DISABLE</td><td></td></tr><tr><td>MPU可缓存权限</td><td>ENABLE</td><td></td></tr><tr><td>MPU可缓冲权限</td><td>ENABLE</td><td></td></tr></tbody></table><table><thead><tr><th><strong>区域2</strong></th><th><strong>外部Flash</strong></th><th><strong>注</strong></th></tr></thead><tbody><tr><td><em>属性</em></td><td><em>值</em></td><td></td></tr><tr><td>MPU区域</td><td>使能</td><td></td></tr><tr><td>MPU区域基址</td><td>0x70000000</td><td>XSPI2（外部Flash）的基址</td></tr><tr><td>MPU区域大小</td><td>0x90000000</td><td>外部Flash前2 MB区域的属性配置（存放应用程序代码）将被覆盖</td></tr><tr><td>MPU子区域禁用</td><td>0x0</td><td></td></tr><tr><td>MPU TEX字段级别</td><td>1级</td><td></td></tr><tr><td>MPU访问权限</td><td>允许所有访问</td><td></td></tr><tr><td>MPU指令访问</td><td>ENABLE</td><td></td></tr><tr><td>MPU可共享权限</td><td>DISABLE</td><td></td></tr><tr><td>MPU可缓存权限</td><td>ENABLE</td><td></td></tr><tr><td>MPU可缓冲权限</td><td>ENABLE</td><td></td></tr></tbody></table><table><thead><tr><th><strong>区域3</strong></th><th><strong>外部PSRAM</strong></th><th><strong>注</strong></th></tr></thead><tbody><tr><td><em>属性</em></td><td><em>值</em></td><td></td></tr><tr><td>MPU区域基址</td><td>0x90000000</td><td>XSPI1（外部PSRAM）的基址</td></tr><tr><td>MPU区域大小</td><td>32 MB</td><td>板载32 MB外部PSRAM</td></tr><tr><td>MPU子区域禁用</td><td>0x0</td><td></td></tr><tr><td>MPU TEX字段级别</td><td>1级</td><td></td></tr><tr><td>MPU访问权限</td><td>允许所有访问</td><td></td></tr><tr><td>MPU指令访问</td><td>DISABLE</td><td></td></tr><tr><td>MPU可共享权限</td><td>DISABLE</td><td></td></tr><tr><td>MPU可缓存权限</td><td>DISABLE</td><td></td></tr><tr><td>MPU可缓冲权限</td><td>DISABLE</td><td></td></tr></tbody></table><table><thead><tr><th><strong>区域4</strong></th><th><strong>DTCM</strong></th><th><strong>注</strong></th></tr></thead><tbody><tr><td><em>属性</em></td><td><em>值</em></td><td></td></tr><tr><td>MPU区域基址</td><td>0x20000000</td><td>DTCM的基址</td></tr><tr><td>MPU区域大小</td><td>64 kB</td><td>默认64 kB DTCM配置</td></tr><tr><td>MPU子区域禁用</td><td>0x0</td><td></td></tr><tr><td>MPU TEX字段级别</td><td>1级</td><td></td></tr><tr><td>MPU访问权限</td><td>允许所有访问</td><td></td></tr><tr><td>MPU指令访问</td><td>DISABLE</td><td></td></tr><tr><td>MPU可共享权限</td><td>DISABLE</td><td></td></tr><tr><td>MPU可缓存权限</td><td>DISABLE</td><td>禁用DTCM缓存，因其无法提升性能表现</td></tr><tr><td>MPU可缓冲权限</td><td>DISABLE</td><td></td></tr></tbody></table><table><thead><tr><th><strong>区域5</strong></th><th><strong>SRAM</strong></th><th><strong>注</strong></th></tr></thead><tbody><tr><td><em>属性</em></td><td><em>值</em></td><td></td></tr><tr><td>MPU区域基址</td><td>0x24000000</td><td>SRAM1的基址</td></tr><tr><td>MPU区域大小</td><td>512 kB</td><td>覆盖SRAM1、SRAM2、SRAM3和SRAM4</td></tr><tr><td>MPU子区域禁用</td><td>0x0</td><td></td></tr><tr><td>MPU TEX字段级别</td><td>1级</td><td></td></tr><tr><td>MPU访问权限</td><td>允许所有访问</td><td></td></tr><tr><td>MPU指令访问</td><td>DISABLE</td><td></td></tr><tr><td>MPU可共享权限</td><td>ENABLE</td><td></td></tr><tr><td>MPU可缓存权限</td><td>ENABLE</td><td></td></tr><tr><td>MPU可缓冲权限</td><td>ENABLE</td><td></td></tr></tbody></table><table><thead><tr><th><strong>区域6</strong></th><th><strong>GPU2D命令列表</strong></th><th><strong>注</strong></th></tr></thead><tbody><tr><td><em>属性</em></td><td><em>值</em></td><td></td></tr><tr><td>MPU区域基址</td><td>0x2406e000</td><td>NeoChrom GPU命令列表置于此区域</td></tr><tr><td>MPU区域大小</td><td>16 kB</td><td>使用TouchGFX时的NeoChrom GPU命令列表默认大小（定义于nema_hal.c文件）。</td></tr><tr><td>MPU子区域禁用</td><td>0x0</td><td></td></tr><tr><td>MPU TEX字段级别</td><td>0级</td><td></td></tr><tr><td>MPU访问权限</td><td>允许所有访问</td><td></td></tr><tr><td>MPU指令访问</td><td>DISABLE</td><td></td></tr><tr><td>MPU可共享权限</td><td>ENABLE</td><td></td></tr><tr><td>MPU可缓存权限</td><td>DISABLE</td><td>禁用命令列表缓存</td></tr><tr><td>MPU可缓冲权限</td><td>ENABLE</td><td></td></tr></tbody></table><p>有关图形专用MPU的一般配置提示，请参见<a href="https://www.st.com/resource/en/application_note/an4861-introduction-to-lcdtft-display-controller-ltdc-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">LTDC应用笔记</a>的第5.6.2节：“配置内存保护单元 (MPU)”。</p><p>如需进一步参考建议，请参见<a href="https://www.st.com/resource/en/application_note/an4838-introduction-to-memory-protection-unit-management-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">MPU应用笔记</a>。 请重点关注第3章：“Cortex-M0+/M3/M4/M7内存类型、寄存器和属性”以及第6章：“基于STM32Cube HAL的Armv6和Armv7架构MPU设置示例”。</p><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content"><ul><li><a href="https://www.st.com/resource/zh/application_note/an4861-introduction-to-lcdtft-display-controller-ltdc-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">AN4861：STM32 MCU LCD-TFT显示控制器(LTDC)入门指南</a></li><li><a href="https://www.st.com/resource/zh/application_note/an4838-introduction-to-memory-protection-unit-management-on-stm32-mcus-stmicroelectronics.pdf" target="_blank" rel="noopener noreferrer">AN4838：STM32 MCU内存保护单元管理基础</a></li></ul></div></div><h2 class="anchor anchorWithStickyNavbar_k1OW" id="调试">调试<a href="#调试" class="hash-link" aria-label="直接链接到调试" title="直接链接到调试">​</a></h2><p>关于在STM32CubeIDE（集成开发环境中）调试STM32H7R/S的完整指南，请参见TouchGFX Designer中TBS包内的readme文件。</p><p>由于STM32H7S78-DK的TBS自举程序和应用程序结构，在IDE中调试代码可能较为复杂。 请按以下步骤在STM32CubeIDE中调试TouchGFX应用程序：</p><ol><li>在TouchGFX Designer中生成代码</li><li>在STM32CubeIDE中打开项目</li><li>启动Boot项目的调试会话</li><li>等待编译和烧录完成</li><li>终止调试会话 (Ctrl + F2)</li><li>启动Appli项目的调试会话</li><li>等待编译和烧录完成</li><li>点击“Resume”(F8)</li><li>按下STM32H7S78-DK板载的黑色NRST按钮</li><li>此时应用程序应停在Appli工程main() 函数首行断点处。 如未暂停，请再次点击“Resume”(F8)</li><li>通过“Resume”(F8) 或“Step Over”(F6) 等操作继续调试</li></ol><p>有关调试的更多信息，请参考维基页面<a href="https://wiki.stmicroelectronics.cn/stm32mcu/wiki/Security:How_to_start_with_DA_access_on_STM32H7RS" target="_blank" rel="noopener noreferrer">“STM32H7RS的DA访问入门指南”</a>。</p><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content"><p><a href="https://wiki.stmicroelectronics.cn/stm32mcu/wiki/Security:How_to_start_with_DA_access_on_STM32H7RS" target="_blank" rel="noopener noreferrer">STM32H7RS的DA访问入门指南</a></p></div></div><h2 class="anchor anchorWithStickyNavbar_k1OW" id="图形应用程序开发结论与通用建议">图形应用程序开发结论与通用建议<a href="#图形应用程序开发结论与通用建议" class="hash-link" aria-label="直接链接到图形应用程序开发结论与通用建议" title="直接链接到图形应用程序开发结论与通用建议">​</a></h2><p>如上所述，在开发STM32H7R/S图形应用程序时需考虑多项因素。 若能充分重视这些要点，凭借其高速CPU和强大的GPU2D，仍可实现卓越的图形性能。</p><p>首先需重点关注外部存储器总线的带宽限制。 虽然所有外接RAM和Flash的MCU都需关注这一点，但由于STM32H7R/S的bootflash结构，这一点尤为关键。</p><p>将关键指令和数据置于ITCM与DTCM内存可显著提升性能。</p><p>同时启用Arm® Cortex®-M7处理器内置的L1指令/数据缓存以增强性能。</p><p>根据应用需求选择XiP或LRUN运行模式，但需注意内存带宽。 若应用代码可完全装载到内部SRAM，LRUN将提供最佳性能。</p><p>必须避免推测性读取访问，因为这可能导致性能显著下降。 需对所有内存区域配置适当的MPU保护。</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档页面导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/4.25/zh-CN/docs/development/scenarios/touchgfx-on-gpu2d"><div class="pagination-nav__sublabel">上一个</div><div class="pagination-nav__label">NeoChrom/NeoChromVG在TouchGFX中的应用</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/4.25/zh-CN/docs/development/scenarios/running-graphics-from-external-ram"><div class="pagination-nav__sublabel">下一个</div><div class="pagination-nav__label">从外部RAM运行图形</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_cuXu thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#存储器配置方案" class="table-of-contents__link toc-highlight">存储器配置方案</a><ul><li><a href="#外部存储器管理器" class="table-of-contents__link toc-highlight">外部存储器管理器</a></li><li><a href="#外部ram中的帧缓存" class="table-of-contents__link toc-highlight">外部RAM中的帧缓存</a></li><li><a href="#紧耦合存储器" class="table-of-contents__link toc-highlight">紧耦合存储器</a></li></ul></li><li><a href="#应用程序类型" class="table-of-contents__link toc-highlight">应用程序类型</a><ul><li><a href="#就地执行-xip" class="table-of-contents__link toc-highlight">就地执行 (XiP)</a></li><li><a href="#加载运行-lrun" class="table-of-contents__link toc-highlight">加载运行 (LRUN)</a></li><li><a href="#性能比较" class="table-of-contents__link toc-highlight">性能比较</a></li></ul></li><li><a href="#mpu-配置" class="table-of-contents__link toc-highlight">MPU 配置</a></li><li><a href="#调试" class="table-of-contents__link toc-highlight">调试</a></li><li><a href="#图形应用程序开发结论与通用建议" class="table-of-contents__link toc-highlight">图形应用程序开发结论与通用建议</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">保留所有权利 © 2024 STMicroelectronics | <a href="https://www.st.com/content/st_com/en/common/terms-of-use.html">使用条款</a> | <a href="https://www.st.com/content/st_com/en/common/privacy-policy.html">隐私策略</a> | <a href="/docs/miscellaneous/cookie-policy">Cookie政策</a> | <a href="https://app-de.onetrust.com/app/#/webform/2b87200d-4023-4588-9df7-ab0cdea1a67e">行使您的权利</a></div></div></div></footer></div></div>
<script src="/4.25/zh-CN/assets/js/runtime~main.b8bbc017.js"></script>
<script src="/4.25/zh-CN/assets/js/main.b4250658.js"></script>
</body>
</html>