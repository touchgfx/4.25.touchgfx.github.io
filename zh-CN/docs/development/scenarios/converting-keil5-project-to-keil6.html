<!doctype html>
<html lang="zh-CN" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-development/scenarios/converting-keil5-project-to-keil6">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Converting a Keil compiler 5 project to Keil compiler 6 | TouchGFX Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://support.touchgfx.com/4.25/zh-CN/img/meta-image.png"><meta data-rh="true" name="twitter:image" content="https://support.touchgfx.com/4.25/zh-CN/img/meta-image.png"><meta data-rh="true" property="og:url" content="https://support.touchgfx.com/4.25/zh-CN/docs/development/scenarios/converting-keil5-project-to-keil6"><meta data-rh="true" name="docusaurus_locale" content="zh-CN"><meta data-rh="true" name="docsearch:language" content="zh-CN"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Converting a Keil compiler 5 project to Keil compiler 6 | TouchGFX Documentation"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/4.25/zh-CN/img/favicon.png"><link data-rh="true" rel="canonical" href="https://support.touchgfx.com/4.25/zh-CN/docs/development/scenarios/converting-keil5-project-to-keil6"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/docs/development/scenarios/converting-keil5-project-to-keil6" hreflang="en"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/ko/docs/development/scenarios/converting-keil5-project-to-keil6" hreflang="ko"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/ja/docs/development/scenarios/converting-keil5-project-to-keil6" hreflang="ja"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/zh-CN/docs/development/scenarios/converting-keil5-project-to-keil6" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/zh-TW/docs/development/scenarios/converting-keil5-project-to-keil6" hreflang="zh-TW"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/docs/development/scenarios/converting-keil5-project-to-keil6" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://B8LNOI0XWD-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="TouchGFX Documentation" href="/4.25/zh-CN/opensearch.xml">


<script src="/4.25/zh-CN/js/one-trust.js"></script>
<script src="/4.25/js/fix-location.js"></script><link rel="stylesheet" href="/4.25/zh-CN/assets/css/styles.29ed0336.css">
<link rel="preload" href="/4.25/zh-CN/assets/js/runtime~main.abcc4669.js" as="script">
<link rel="preload" href="/4.25/zh-CN/assets/js/main.cf98cd31.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><div role="region" aria-label="跳转到主要内容"><a class="skipToContent_XQ8D" href="#docusaurus_skipToContent_fallback">跳转到主要内容</a></div><nav aria-label="主要" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/4.25/zh-CN/docs/introduction/welcome"><div class="navbar__logo"><img src="/4.25/zh-CN/img/logo.svg" alt="TouchGFX" class="themedImage_S0p_ themedImage--light_HAsR"><img src="/4.25/zh-CN/img/logo.svg" alt="TouchGFX" class="themedImage_S0p_ themedImage--dark_ztGn"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/4.25/zh-CN/docs/introduction/welcome">文档</a><a class="navbar__item navbar__link" href="/4.25/zh-CN/docs/api/namespacetouchgfx">API</a><a class="navbar__item navbar__link" sidebarid="academy" href="/4.25/zh-CN/academy/academy-introduction">TouchGFX 学院</a><a href="https://community.st.com/s/topic/0TO0X0000003iw6WAA/touchgfx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">社区</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/4.25/zh-CN/docs/introduction/welcome">4.25</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/4.25/zh-CN/docs/development/scenarios/converting-keil5-project-to-keil6">4.25</a></li><li><a href="https://support.touchgfx.com/4.25" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.25<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.24" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.24<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.23" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.23<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.22" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.22<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.21" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.21<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.20" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.20<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.19" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.19<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.18" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.18<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.17" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.17<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.16" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.16<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.15" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.15<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.14" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.14<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.13" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.13<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">简体中文</a><ul class="dropdown__menu"><li><a href="/4.25/docs/development/scenarios/converting-keil5-project-to-keil6" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/4.25/ko/docs/development/scenarios/converting-keil5-project-to-keil6" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ko">한국어</a></li><li><a href="/4.25/ja/docs/development/scenarios/converting-keil5-project-to-keil6" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja">日本語</a></li><li><a href="/4.25/zh-CN/docs/development/scenarios/converting-keil5-project-to-keil6" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-CN">简体中文</a></li><li><a href="/4.25/zh-TW/docs/development/scenarios/converting-keil5-project-to-keil6" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-TW">繁體中文</a></li></ul></div><div class="searchBox_BKwK"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_Ew24 docsWrapper_sxyk"><button aria-label="滚动返回顶部" class="clean-btn theme-back-to-top-button backToTopButton_iHIs" type="button"></button><div class="docPage_S7pn"><aside class="theme-doc-sidebar-container docSidebarContainer_xHYe"><div class="sidebarViewport_t27s"><div class="sidebar_RCjb"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_YHDa"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.25/zh-CN/docs/category/introduction">介绍</a><button aria-label="切换可折叠边栏类别“介绍”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.25/zh-CN/docs/category/basic-concepts">基本概念</a><button aria-label="切换可折叠边栏类别“基本概念”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/4.25/zh-CN/docs/development/development-introduction">开发</a><button aria-label="切换可折叠边栏类别“开发”" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.25/zh-CN/docs/development/hardware-selection/hardware-selection-introduction">硬件选择</a><button aria-label="切换可折叠边栏类别“硬件选择”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.25/zh-CN/docs/development/board-bring-up/board-introduction">驱动板卡</a><button aria-label="切换可折叠边栏类别“驱动板卡”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.25/zh-CN/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction">TouchGFX AL开发</a><button aria-label="切换可折叠边栏类别“TouchGFX AL开发”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.25/zh-CN/docs/development/ui-development/ui-development-introduction">UI开发</a><button aria-label="切换可折叠边栏类别“UI开发”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/4.25/zh-CN/docs/category/scenarios-2">场景</a><button aria-label="切换可折叠边栏类别“场景”" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/touchgfx-on-lowcost-hardware">低成本硬件上的TouchGFX</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/touchgfx-on-gpu2d">NeoChrom/NeoChromVG在TouchGFX中的应用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/running-graphics-on-stm32h7r">Running graphics on STM32H7R7 &amp; S7</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/running-graphics-from-external-ram">Running graphics from external RAM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/lowering-memory-usage-with-partial-framebuffer">通过部分帧缓冲降低内存使用率</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/flash-limited">Flash受限的GUI开发</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/using-non-memory-mapped-flash">使用非内存映射闪存存储图像</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/using-serial-flash">使用串行闪存存储图像和字体</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/fonts-in-unmapped-flash">使用非内存映射闪存存储字体数据</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/scenarios-change-pixelformat-bpp">更改应用的像素格式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/scenarios-create-at">创建TouchGFX应用模板</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/example-gpio">外部事件作为触发器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/running-without-rtos">在无RTOS的情况下基于TouchGFX硬件模板上运行项目</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/adding-files-to-stm32cubemx-projet">向STM32CubeMX工程中添加文件</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/converting-keil5-project-to-keil6">Converting a Keil compiler 5 project to Keil compiler 6</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/zh-CN/docs/development/scenarios/cmake-as-build-system">CMake as build system</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.25/zh-CN/docs/category/miscellaneous-1">其他情况</a><button aria-label="切换可折叠边栏类别“其他情况”" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.25/zh-CN/docs/category/resources">资源</a><button aria-label="切换可折叠边栏类别“资源”" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_BaAN"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_lZef"><div id="doc-version-banner-identifier" class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>这是<!-- -->TouchGFX<b>4.25</b> 的文档，该版本不再被主动维护。</div><div class="margin-top--md">如需最新文档，请参阅<b><a href="https://support.touchgfx.com/docs/development/scenarios/converting-keil5-project-to-keil6" target="_blank" rel="noopener noreferrer">最新版本</a></b>。</div></div><div class="docItemContainer_xfEB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_FLLg" aria-label="面包屑导航"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.25/zh-CN/docs/development/development-introduction"><span itemprop="name">开发</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.25/zh-CN/docs/category/scenarios-2"><span itemprop="name">场景</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Converting a Keil compiler 5 project to Keil compiler 6</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_wNou theme-doc-toc-mobile tocMobile_WXEt"><button type="button" class="clean-btn tocCollapsibleButton_D5Nd">在当前页面</button></div><div class="theme-doc-markdown markdown"><header><h1>Converting a Keil compiler 5 project to Keil compiler 6</h1></header><h2 class="anchor anchorWithStickyNavbar_npWT" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="直接链接到Introduction" title="直接链接到Introduction">​</a></h2><p>STM32CubeMX does not support generation of Keil compiler 6 / armclang projects for all MCU&#x27;s. In order to use Keil compiler 6 with TouchGFX in these scenarios, the following steps should be taken to convert the project.</p><p>It is recommended to back up your project before following the guide, in case you&#x27;ll have to undo your changes.</p><h2 class="anchor anchorWithStickyNavbar_npWT" id="change-toolchain">Change toolchain in STM32CubeMX<a href="#change-toolchain" class="hash-link" aria-label="直接链接到Change toolchain in STM32CubeMX" title="直接链接到Change toolchain in STM32CubeMX">​</a></h2><p>First, change the toolchain in the &quot;Project Manager&quot; tab in STM32CubeMX to MDK-ARM, so a Keil project is created. Then, generate code.</p><div class="figure noshadow"><a href="/4.25/zh-CN/img/development/scenarios/convert-keil5-to-keil6/cubemx-toolchain.webp" target="_blank"><img src="/4.25/zh-CN/img/development/scenarios/convert-keil5-to-keil6/cubemx-toolchain.webp"></a><p>MDK-ARM toolchain selected</p></div><h2 class="anchor anchorWithStickyNavbar_npWT" id="generate-code">Generate code in TouchGFX designer<a href="#generate-code" class="hash-link" aria-label="直接链接到Generate code in TouchGFX designer" title="直接链接到Generate code in TouchGFX designer">​</a></h2><p>Generate code from the TouchGFX designer by pressing the button or the F4 key on your keyboard, to add the TouchGFX specific code to the project.</p><div class="figure noshadow"><a href="/4.25/zh-CN/img/development/scenarios/convert-keil5-to-keil6/designer-generate.webp" target="_blank"><img src="/4.25/zh-CN/img/development/scenarios/convert-keil5-to-keil6/designer-generate.webp"></a><p>Generate code</p></div><h2 class="anchor anchorWithStickyNavbar_npWT" id="modify-scatter">Modify the Keil Scatter file<a href="#modify-scatter" class="hash-link" aria-label="直接链接到Modify the Keil Scatter file" title="直接链接到Modify the Keil Scatter file">​</a></h2><p>The scatter file that Keil uses to link the project needs some tweaks to ensure that buffers created by TouchGFX are not initialized, since they are usually placed in external ram, which is not accessible at boot.<br>
<!-- -->Look through the .sct file in the MDK-ARM subfolder of the project to identify which buffers are used for the project, and add .bss. before the object name.<br>
<!-- -->The objects are called TouchGFX_Framebuffer, Video_RGB_Buffer, Nemagfx_Memory_Pool_Buffer and Nemagfx_Stencil_Buffer, but they are not necessarily all used in the project.</p><div class="code-header"><div><h5>Example of updated scatter file</h5></div></div><div class="codeBlockContainer_wdCH theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_NZw4"><pre tabindex="0" class="prism-code language-text codeBlock_Q0k3 thin-scrollbar"><code class="codeBlockLines_hUh3"><span class="token-line" style="color:#bfc7d5"><span class="token plain">; *************************************************************</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; *** Scatter-Loading Description File generated by uVision ***</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; *************************************************************</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LR_IROM1 0x08000000 0x00100000  {    ; load region size_region</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ER_IROM1 0x08000000 0x00100000  {  ; load address = execution address</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   *.o (RESET, +First)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   *(InRoot$$Sections)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   .ANY (+RO)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  RW_IRAM1 0x24000000 0x00080000  {  ; RW data</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   .ANY (+RW +ZI)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  RW_HYPERRAM 0x70000000 UNINIT 0x00FFFFFF {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    *.o (.bss.TouchGFX_Framebuffer)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    *.o (.bss.Video_RGB_Buffer)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LR_EROM1 0x90000000 0x2000000  {    ; load region size_region</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ER_EROM1 0x90000000 0x2000000  {  ; load address = execution address</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   *.o (ExtFlashSection)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;  *.o (TextFlashSection)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;  *.o (FontFlashSection)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_ibJ8"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_pv0M" aria-hidden="true"><svg class="copyButtonIcon_nHt1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_HEug" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_npWT" id="modify-project-options">Modify the Keil project options<a href="#modify-project-options" class="hash-link" aria-label="直接链接到Modify the Keil project options" title="直接链接到Modify the Keil project options">​</a></h2><p>Open the project in Keil uVision, then go to the project settings, either by right-clicking the second item in the list on the right and selecting &quot;Options for Target <em>xxx</em>&quot;, or by clicking the &quot;Project&quot; menu at the top and selecting &quot;Options for Target <em>xxx</em>&quot;.<br>
<!-- -->In the &quot;target&quot; tab, select the following settings:</p><ul><li>Set compiler to &quot;Use default compiler 6&quot;</li><li>Disable Use MicroLIB</li></ul><div class="figure noshadow"><a href="/4.25/zh-CN/img/development/scenarios/convert-keil5-to-keil6/keil-target-options.webp" target="_blank"><img src="/4.25/zh-CN/img/development/scenarios/convert-keil5-to-keil6/keil-target-options.webp"></a><p>Target options</p></div><p>In the C/C++ tab, select the following settings:</p><ul><li>set language c to c11 and c++ to c++11</li><li>Disable short enums/wchar</li><li>Recommended Optimization is -Oz for smaller code size</li></ul><div class="figure noshadow"><a href="/4.25/zh-CN/img/development/scenarios/convert-keil5-to-keil6/keil-c-cpp-options.webp" target="_blank"><img src="/4.25/zh-CN/img/development/scenarios/convert-keil5-to-keil6/keil-c-cpp-options.webp"></a><p>C/C++ options</p></div><p>If FreeRTOS is being used, the port needs to be changed to gcc, which is compatible with Keil compiler 6. The gcc port is used by TouchGFX, so it is available in the project, although it is not generated by STM32CubeMX when Keil project generation is selected.<br>
<!-- -->To make the change, the first step is to change the include search path for the port. Click on &quot;...&quot; next to the <em>Include paths</em> text field.<br>
<!-- -->Locate the line that starts with &quot;../Middlewares/Third_Party/FreeRTOS/Source/portable/RVDS&quot;. Then add &quot;/gcc&quot; after &quot;..&quot;, and change &quot;RVDS&quot; to &quot;GCC&quot;.</p><div class="figure noshadow"><a href="/4.25/zh-CN/img/development/scenarios/convert-keil5-to-keil6/keil-include-path-modified.webp" target="_blank"><img src="/4.25/zh-CN/img/development/scenarios/convert-keil5-to-keil6/keil-include-path-modified.webp"></a><p>Modify include search path</p></div><p>Note that for some revisions of Cortex M7, FreeRTOS recommends using the Cortex M4f port. This applies to STM32H7 series chips, and the original search path should reflect that.</p><h2 class="anchor anchorWithStickyNavbar_npWT" id="modify-project-included-files">Modify the Keil project included files<a href="#modify-project-included-files" class="hash-link" aria-label="直接链接到Modify the Keil project included files" title="直接链接到Modify the Keil project included files">​</a></h2><p>To be able to link the TouchGFX library, it is needed to change the one that is included in the project to a Keil compiler 6 compatible version. To do this, locate the touchgfx_core.lib file in the file tree (it should be located under the <em>&quot;Lib&quot;</em> category), right click the parent folder and click &quot;Add Existing File to Group <em>xxx</em>&quot;.</p><div class="figure noshadow"><a href="/4.25/zh-CN/img/development/scenarios/convert-keil5-to-keil6/keil-add-item.webp" target="_blank"><img src="/4.25/zh-CN/img/development/scenarios/convert-keil5-to-keil6/keil-add-item.webp"></a><p>Click add</p></div><p>Navigate to &quot;<!-- -->[Project folder]<!-- -->/Middlewares/ST/touchgfx/lib/core/<!-- -->[Architecture]<!-- -->/Keil6.x&quot; and add &quot;touchgfx_core_wchar32.lib&quot;.<br>
<!-- -->[Architecture]<!-- --> in this case refers to the actual architecture of the MCU. If in doubt, check the location of the existing library.</p><div class="figure noshadow"><a href="/4.25/zh-CN/img/development/scenarios/convert-keil5-to-keil6/keil-add-tgfxlib.webp" target="_blank"><img src="/4.25/zh-CN/img/development/scenarios/convert-keil5-to-keil6/keil-add-tgfxlib.webp"></a><p>Add touchgfx_core_wchar32.lib</p></div><p>Then find the old libary reference in the file tree, right click it and click &quot;Remove File <em>xxx</em>&quot;.</p><div class="figure noshadow"><a href="/4.25/zh-CN/img/development/scenarios/convert-keil5-to-keil6/keil-remove-tgfxlib.webp" target="_blank"><img src="/4.25/zh-CN/img/development/scenarios/convert-keil5-to-keil6/keil-remove-tgfxlib.webp"></a><p>Delete reference</p></div><p>If using FreeRTOS, it is also needed to replace the port.c file. Locate it under &quot;Middlewares/FreeRTOS&quot;, and delete the file as described above. Then, import the new port.c file located in &quot;<!-- -->[Project folder]<!-- -->/gcc/Middlewares/Third_Party/FreeRTOS/Source/portable/GCC/<!-- -->[FreeRTOS architecture]<!-- -->&quot;.</p><div class="figure noshadow"><a href="/4.25/zh-CN/img/development/scenarios/convert-keil5-to-keil6/keil-add-portc.webp" target="_blank"><img src="/4.25/zh-CN/img/development/scenarios/convert-keil5-to-keil6/keil-add-portc.webp"></a><p>Add port.c</p></div><p>The project should be able to compile succesfully at this point.<br>
<!-- -->It is advised to create a copy of the project folder at this state as a reference, since regeneration in both STM32CubeMX and TouchGFX may undo some of the changes.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档页面导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/4.25/zh-CN/docs/development/scenarios/adding-files-to-stm32cubemx-projet"><div class="pagination-nav__sublabel">上一个</div><div class="pagination-nav__label">向STM32CubeMX工程中添加文件</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/4.25/zh-CN/docs/development/scenarios/cmake-as-build-system"><div class="pagination-nav__sublabel">下一个</div><div class="pagination-nav__label">CMake as build system</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_SRp5 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#change-toolchain" class="table-of-contents__link toc-highlight">Change toolchain in STM32CubeMX</a></li><li><a href="#generate-code" class="table-of-contents__link toc-highlight">Generate code in TouchGFX designer</a></li><li><a href="#modify-scatter" class="table-of-contents__link toc-highlight">Modify the Keil Scatter file</a></li><li><a href="#modify-project-options" class="table-of-contents__link toc-highlight">Modify the Keil project options</a></li><li><a href="#modify-project-included-files" class="table-of-contents__link toc-highlight">Modify the Keil project included files</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">保留所有权利 © 2024 STMicroelectronics | <a href="https://www.st.com/content/st_com/en/common/terms-of-use.html">使用条款</a> | <a href="https://www.st.com/content/st_com/en/common/privacy-policy.html">隐私策略</a> | <a href="/docs/miscellaneous/cookie-policy">Cookie政策</a> | <a href="https://app-de.onetrust.com/app/#/webform/2b87200d-4023-4588-9df7-ab0cdea1a67e">行使您的权利</a></div></div></div></footer></div></div>
<script src="/4.25/zh-CN/assets/js/runtime~main.abcc4669.js"></script>
<script src="/4.25/zh-CN/assets/js/main.cf98cd31.js"></script>
</body>
</html>