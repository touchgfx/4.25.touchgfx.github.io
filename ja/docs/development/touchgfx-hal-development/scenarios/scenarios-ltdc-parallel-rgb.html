<!doctype html>
<html lang="ja" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-development/touchgfx-hal-development/scenarios/scenarios-ltdc-parallel-rgb">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">LTDC Display Interface | TouchGFX Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://support.touchgfx.com/4.25/ja/img/meta-image.png"><meta data-rh="true" name="twitter:image" content="https://support.touchgfx.com/4.25/ja/img/meta-image.png"><meta data-rh="true" property="og:url" content="https://support.touchgfx.com/4.25/ja/docs/development/touchgfx-hal-development/scenarios/scenarios-ltdc-parallel-rgb"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="LTDC Display Interface | TouchGFX Documentation"><meta data-rh="true" name="description" content="This scenario describes how to configure the STM32 LTDC display controller and TouchGFX Generator when using a LCD-TFT parallel display interface."><meta data-rh="true" property="og:description" content="This scenario describes how to configure the STM32 LTDC display controller and TouchGFX Generator when using a LCD-TFT parallel display interface."><link data-rh="true" rel="icon" href="/4.25/ja/img/favicon.png"><link data-rh="true" rel="canonical" href="https://support.touchgfx.com/4.25/ja/docs/development/touchgfx-hal-development/scenarios/scenarios-ltdc-parallel-rgb"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/docs/development/touchgfx-hal-development/scenarios/scenarios-ltdc-parallel-rgb" hreflang="en"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/ko/docs/development/touchgfx-hal-development/scenarios/scenarios-ltdc-parallel-rgb" hreflang="ko"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/ja/docs/development/touchgfx-hal-development/scenarios/scenarios-ltdc-parallel-rgb" hreflang="ja"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/zh-CN/docs/development/touchgfx-hal-development/scenarios/scenarios-ltdc-parallel-rgb" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/zh-TW/docs/development/touchgfx-hal-development/scenarios/scenarios-ltdc-parallel-rgb" hreflang="zh-TW"><link data-rh="true" rel="alternate" href="https://support.touchgfx.com/4.25/docs/development/touchgfx-hal-development/scenarios/scenarios-ltdc-parallel-rgb" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://B8LNOI0XWD-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="TouchGFX Documentation" href="/4.25/ja/opensearch.xml">


<script src="/4.25/ja/js/one-trust.js"></script>
<script src="/4.25/js/fix-location.js"></script><link rel="stylesheet" href="/4.25/ja/assets/css/styles.29ed0336.css">
<link rel="preload" href="/4.25/ja/assets/js/runtime~main.524fbfbc.js" as="script">
<link rel="preload" href="/4.25/ja/assets/js/main.a46b416f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><div role="region" aria-label="メイン･コンテンツまでスキップ"><a class="skipToContent_XQ8D" href="#docusaurus_skipToContent_fallback">メイン･コンテンツまでスキップ</a></div><nav aria-label="Main（メイン）" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar（ナビゲーション･バーをトグル）" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/4.25/ja/docs/introduction/welcome"><div class="navbar__logo"><img src="/4.25/ja/img/logo.svg" alt="TouchGFX" class="themedImage_S0p_ themedImage--light_HAsR"><img src="/4.25/ja/img/logo.svg" alt="TouchGFX" class="themedImage_S0p_ themedImage--dark_ztGn"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/4.25/ja/docs/introduction/welcome">ドキュメント</a><a class="navbar__item navbar__link" href="/4.25/ja/docs/api/namespacetouchgfx">API</a><a class="navbar__item navbar__link" sidebarid="academy" href="/4.25/ja/academy/academy-introduction">TouchGFX Academy</a><a href="https://community.st.com/s/topic/0TO0X0000003iw6WAA/touchgfx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">コミュニティ</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/4.25/ja/docs/introduction/welcome">4.25</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/4.25/ja/docs/development/touchgfx-hal-development/scenarios/scenarios-ltdc-parallel-rgb">4.25</a></li><li><a href="https://support.touchgfx.com/4.25" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.25<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.24" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.24<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.23" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.23<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.22" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.22<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.21" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.21<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.20" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.20<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.19" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.19<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.18" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.18<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.17" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.17<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.16" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.16<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.15" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.15<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.14" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.14<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://support.touchgfx.com/4.13" target="_blank" rel="noopener noreferrer" class="dropdown__link">4.13<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_rObz"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">日本語</a><ul class="dropdown__menu"><li><a href="/4.25/docs/development/touchgfx-hal-development/scenarios/scenarios-ltdc-parallel-rgb" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/4.25/ko/docs/development/touchgfx-hal-development/scenarios/scenarios-ltdc-parallel-rgb" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ko">한국어</a></li><li><a href="/4.25/ja/docs/development/touchgfx-hal-development/scenarios/scenarios-ltdc-parallel-rgb" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="ja">日本語</a></li><li><a href="/4.25/zh-CN/docs/development/touchgfx-hal-development/scenarios/scenarios-ltdc-parallel-rgb" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-CN">简体中文</a></li><li><a href="/4.25/zh-TW/docs/development/touchgfx-hal-development/scenarios/scenarios-ltdc-parallel-rgb" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-TW">繁體中文</a></li></ul></div><div class="searchBox_BKwK"><button type="button" class="DocSearch DocSearch-Button" aria-label="検索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">検索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_Ew24 docsWrapper_sxyk"><button aria-label="上へスクロールしてもどる" class="clean-btn theme-back-to-top-button backToTopButton_iHIs" type="button"></button><div class="docPage_S7pn"><aside class="theme-doc-sidebar-container docSidebarContainer_xHYe"><div class="sidebarViewport_t27s"><div class="sidebar_RCjb"><nav aria-label="Docs sidebar（ドキュメント･サイドバー）" class="menu thin-scrollbar menu_YHDa"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.25/ja/docs/category/introduction">概要</a><button aria-label="折りたたみ可能なサイドバーのカテゴリ&#x27;概要&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.25/ja/docs/category/basic-concepts">基本概念</a><button aria-label="折りたたみ可能なサイドバーのカテゴリ&#x27;基本概念&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/4.25/ja/docs/development/development-introduction">開発</a><button aria-label="折りたたみ可能なサイドバーのカテゴリ&#x27;開発&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.25/ja/docs/development/hardware-selection/hardware-selection-introduction">ハードウェアの選択</a><button aria-label="折りたたみ可能なサイドバーのカテゴリ&#x27;ハードウェアの選択&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.25/ja/docs/development/board-bring-up/board-introduction">ボード立ち上げ</a><button aria-label="折りたたみ可能なサイドバーのカテゴリ&#x27;ボード立ち上げ&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/4.25/ja/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction">TouchGFX AL（抽象化レイヤ）開発</a><button aria-label="折りたたみ可能なサイドバーのカテゴリ&#x27;TouchGFX AL（抽象化レイヤ）開発&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/ja/docs/development/touchgfx-hal-development/touchgfx-architecture">抽象化レイヤ･アーキテクチャ</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.25/ja/docs/category/generator-user-guide">Generatorユーザガイド</a><button aria-label="折りたたみ可能なサイドバーのカテゴリ&#x27;Generatorユーザガイド&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/4.25/ja/docs/category/scenarios">シナリオ</a><button aria-label="折りたたみ可能なサイドバーのカテゴリ&#x27;シナリオ&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/4.25/ja/docs/development/touchgfx-hal-development/scenarios/scenarios-ltdc-parallel-rgb">LTDC Display Interface</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/ja/docs/development/touchgfx-hal-development/scenarios/scenarios-dsi-video-mode">MIPI-DSIビデオ･モード</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/ja/docs/development/touchgfx-hal-development/scenarios/scenarios-fmc">FMC Display Interface</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/ja/docs/development/touchgfx-hal-development/scenarios/scenarios-spi">SPI Display Interface</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/ja/docs/development/touchgfx-hal-development/scenarios/scenarios-dsi-command-mode">MIPI-DSIコマンド･モード</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/ja/docs/development/touchgfx-hal-development/scenarios/scenarios-configure-rtos">リアルタイム･オペレーティング･システム</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/ja/docs/development/touchgfx-hal-development/scenarios/scenarios-video-decoding">ビデオ･デコーディング</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/4.25/ja/docs/development/touchgfx-hal-development/scenarios/scenarios-measure-performance">パフォーマンスの測定</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.25/ja/docs/development/ui-development/ui-development-introduction">UI開発</a><button aria-label="折りたたみ可能なサイドバーのカテゴリ&#x27;UI開発&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/4.25/ja/docs/category/scenarios-2">シナリオ</a><button aria-label="折りたたみ可能なサイドバーのカテゴリ&#x27;シナリオ&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.25/ja/docs/category/miscellaneous-1">その他</a><button aria-label="折りたたみ可能なサイドバーのカテゴリ&#x27;その他&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/4.25/ja/docs/category/resources">リソース</a><button aria-label="折りたたみ可能なサイドバーのカテゴリ&#x27;リソース&#x27;を切り替える" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_BaAN"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_lZef"><div id="doc-version-banner-identifier" class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>TouchGFX<!-- --> <b>4.25</b>のドキュメントですが、これはアクティブに保持されていません。</div><div class="margin-top--md">ドキュメントの最新版については、<b><a href="https://support.touchgfx.com/docs/development/touchgfx-hal-development/scenarios/scenarios-ltdc-parallel-rgb" target="_blank" rel="noopener noreferrer">最新版</a></b>を参照してください。</div></div><div class="docItemContainer_xfEB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_FLLg" aria-label="パンくずリスト"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.25/ja/docs/development/development-introduction"><span itemprop="name">開発</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.25/ja/docs/development/touchgfx-hal-development/touchgfx-al-development-introduction"><span itemprop="name">TouchGFX AL（抽象化レイヤ）開発</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/4.25/ja/docs/category/scenarios"><span itemprop="name">シナリオ</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">LTDC Display Interface</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_wNou theme-doc-toc-mobile tocMobile_WXEt"><button type="button" class="clean-btn tocCollapsibleButton_D5Nd">このページでは</button></div><div class="theme-doc-markdown markdown"><header><h1>LTDC Display Interface</h1></header><p>This scenario describes how to configure the STM32 LTDC display controller and <em>TouchGFX Generator</em> when using a LCD-TFT parallel display interface.</p><p>The <em>TouchGFX Generator</em> can generate a <strong>full TouchGFX AL</strong> that configures the LTDC to transfer pixels from the framebuffer memory to the display and synchronize the display with the TouchGFX Engine.</p><h2 class="anchor anchorWithStickyNavbar_npWT" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Configurationに直接リンク" title="Configurationに直接リンク">​</a></h2><p>Enable the <em>LTDC</em> from the <em>Multimedia</em> group in the STM32CubeMX category list.</p><div class="figure noshadow"><a href="/4.25/ja/img/development/touchgfx-hal-development/touchgfx-generator/ltdc-modes.webp" target="_blank"><img width="400" src="/4.25/ja/img/development/touchgfx-hal-development/touchgfx-generator/ltdc-modes.webp"></a><p></p></div><p>Once LTDC is enabled, the <em>Parallel RGB (LTDC)</em> option becomes available through the <em>Display</em> section of the TouchGFX Generator.</p><div class="figure noshadow"><a href="/4.25/ja/img/development/touchgfx-hal-development/touchgfx-generator/display-if-options.webp" target="_blank"><img width="400" src="/4.25/ja/img/development/touchgfx-hal-development/touchgfx-generator/display-if-options.webp"></a><p></p></div><p>After LTDC is enabled through STM32CubeMX, the following parameters must be configured:</p><ol><li>接続するディスプレイの仕様に合わせたLTDCの設定(GPIOとタイミング)</li><li>目的とするTouchGFXアプリケーションの仕様に合わせたLTDCの設定</li></ol><p>The TouchGFX Generator can read various configurations from STM32CubeMX and provide a list of warnings, recommendations or errors in the <em>Dependencies</em> section. The image below shows the list of dependencies present when initially enabling LTDC in STM32CubeMX:</p><div class="figure noshadow"><a href="/4.25/ja/img/development/touchgfx-hal-development/scenarios/ltdc-dependencies.webp" target="_blank"><img width="700" src="/4.25/ja/img/development/touchgfx-hal-development/scenarios/ltdc-dependencies.webp"></a><p></p></div><div class="highlight highlight-note"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div>Note</h5></div><div class="highlight-content">STM32CubeMXでLTDCを有効化するとすぐに、TouchGFX Generatorのインタフェースに、LTDCに関する推奨事項、警告、およびエラーが表示されます。</div></div><h3 class="anchor anchorWithStickyNavbar_npWT" id="parameter-and-layer-configuration">Parameter and Layer Configuration<a href="#parameter-and-layer-configuration" class="hash-link" aria-label="Parameter and Layer Configurationに直接リンク" title="Parameter and Layer Configurationに直接リンク">​</a></h3><p>The following parameters must be configured in the LTDC block:</p><table><thead><tr><th>依存関係</th><th>説明</th></tr></thead><tbody><tr><td>レイヤ数</td><td>TouchGFXには、単一レイヤのみ使用可能です。</td></tr><tr><td>ウィンドウ位置</td><td>デフォルトでは、LTDCレイヤのウィンドウの水平位置および垂直位置は0です。 ウィンドウの水平停止位置と垂直停止位置は、ディスプレイの寸法と同じに設定する必要があります。</td></tr><tr><td>アルファ定数は0です</td><td>デフォルトでは、LTDCレイヤのアルファ定数は0です。 アプリケーションでグローバル･アルファを常時使用しないかぎり、この値は0より大きく、可能ならば255としてください。</td></tr></tbody></table><p>次の図は、警告を解消するようにLTDCを設定し、TouchGFX Generatorのインタフェースに［Dependencies］グループが表示されなくなった状態を示しています</p><div class="figure noshadow"><a href="/4.25/ja/img/development/touchgfx-hal-development/touchgfx-generator/ltdc-config.webp" target="_blank"><img width="300" src="/4.25/ja/img/development/touchgfx-hal-development/touchgfx-generator/ltdc-config.webp"></a><p></p></div><div class="highlight highlight-note"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div>Note</h5></div><div class="highlight-content">TouchGFX Generator inherits the <b>Width</b> and <b>Height</b> values from the LTDC configuration, if LTDC is enabled and Parallel RGB (LTDC) option is selected in the Display section.</div></div><h3 class="anchor anchorWithStickyNavbar_npWT" id="touchgfx-driver--vsync-signal">TouchGFXドライバ / VSYNC信号<a href="#touchgfx-driver--vsync-signal" class="hash-link" aria-label="TouchGFXドライバ / VSYNC信号に直接リンク" title="TouchGFXドライバ / VSYNC信号に直接リンク">​</a></h3><p>Once <em>Parallel RGB (LTDC)</em> is selected as Display Interface, developers gain access to the <em>LTDC</em> Application Tick Driver, which use the LTDC interrupt to drive the TouchGFX Engine main loop. This is the recommended way to drive the TouchGFX Engine main loop when using LTDC.</p><div class="figure noshadow"><a href="/4.25/ja/img/development/touchgfx-hal-development/scenarios/ltdc-application-tick-source.webp" target="_blank"><img width="350" src="/4.25/ja/img/development/touchgfx-hal-development/scenarios/ltdc-application-tick-source.webp"></a><p></p></div><div class="highlight highlight-note"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div>Note</h5></div><div class="highlight-content">For the LTDC driver to automatically drive the  TouchGFX application, users must enable the LTDC global interrupt through the LTDC NVIC settings or through Global NVIC settings, and also enable generation of handler code.</div></div><p>The following code is a generated LTDC interrupt handler (for single or double framebuffer strategy) that automatically signals and unblocks the TouchGFX Engine main loop when the display is ready.</p><div class="code-header"><div><h5>TouchGFXGeneratedHAL.cpp</h5></div></div><div class="language-cpp codeBlockContainer_wdCH theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_NZw4"><pre tabindex="0" class="prism-code language-cpp codeBlock_Q0k3 thin-scrollbar"><code class="codeBlockLines_hUh3"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">extern</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;C&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">HAL_LTDC_LineEventCallback</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">LTDC_HandleTypeDef</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> hltdc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token class-name" style="color:rgb(255, 203, 107)">HAL</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">getInstance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">return</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">LTDC</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">LIPCR </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> lcd_int_active_line</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//entering active area</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token function" style="color:rgb(130, 170, 255)">HAL_LTDC_ProgramLineEvent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">hltdc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> lcd_int_porch_line</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token class-name" style="color:rgb(255, 203, 107)">HAL</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">getInstance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">vSync</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token class-name" style="color:rgb(255, 203, 107)">OSWrappers</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">signalVSync</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Swap frame buffers immediately instead of waiting for the task to be scheduled in.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Note: task will also swap when it wakes up, but that operation is guarded and will not have</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// any effect if already swapped.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token class-name" style="color:rgb(255, 203, 107)">HAL</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">getInstance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">swapFrameBuffers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token class-name" style="color:rgb(255, 203, 107)">GPIO</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">set</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">GPIO</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">VSYNC_FREQ</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//exiting active area</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token function" style="color:rgb(130, 170, 255)">HAL_LTDC_ProgramLineEvent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">hltdc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> lcd_int_active_line</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Signal to the framework that display update has finished.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token class-name" style="color:rgb(255, 203, 107)">HAL</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">getInstance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">frontPorchEntered</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token class-name" style="color:rgb(255, 203, 107)">GPIO</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">clear</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">GPIO</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">VSYNC_FREQ</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup_ibJ8"><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_pv0M" aria-hidden="true"><svg class="copyButtonIcon_nHt1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_HEug" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_npWT" id="ltdc-frame-buffer-address-configuration">LTDC Frame Buffer address configuration<a href="#ltdc-frame-buffer-address-configuration" class="hash-link" aria-label="LTDC Frame Buffer address configurationに直接リンク" title="LTDC Frame Buffer address configurationに直接リンク">​</a></h3><p>生成されたTouchGFX HALが実行時にLTDCのレイヤ･カラーのフレームバッファ開始アドレスを自動的に設定するので、ユーザがLTDC設定で値を設定することはありません。</p><h3 class="anchor anchorWithStickyNavbar_npWT" id="gfxmmu">GFXMMU configuration<a href="#gfxmmu" class="hash-link" aria-label="GFXMMU configurationに直接リンク" title="GFXMMU configurationに直接リンク">​</a></h3><p>When using <em>Partial Buffer - LTDC driven display</em> framebuffer strategy, the GFXMMU must be enabled and configured. The GFXMMU is used to map the framebuffer addresses that are read by the LTDC to the addresses of the partial framebuffer block in physical memory.</p><p>First, enable the GFXMMU in STM32CubeMX under the <em>Multimedia</em> section, and enable <em>Address Translation</em>. For 16- and 32-bit framebuffer pixel formats a <em>Block Size</em> of 16 bytes is recommended. For 24-bit framebuffer pixel formats a <em>Block Size</em> of 12 bytes is required.</p><div class="figure noshadow"><a href="/4.25/ja/img/development/touchgfx-hal-development/scenarios/gfxmmu-config.png" target="_blank"><img width="700" src="/4.25/ja/img/development/touchgfx-hal-development/scenarios/gfxmmu-config.png"></a><p></p></div><div class="highlight highlight-note"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div>Note</h5></div><div class="highlight-content">Some MCU&#x27;s (e.g., STM32U5G9) define a <i>Number of blocks of 16 bytes per line</i> parameter with options 256 or 192 instead of <i>Block Size</i>. These correspond to 16 or 12 byte Block Size respectively.</div></div><div class="highlight highlight-caution"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></div>Caution</h5></div><div class="highlight-content">When using the GFXMMU to map addresses, there are limitations to the maximum width and height of the Display being used depending on the framebuffer pixel format and Block Size:<li>32-bit framebuffer pixel format (12-byte / 16-byte): <b>768x1024px / 1024x1024px</b></li><li>16-bit framebuffer pixel format (12-byte / 16-byte): <b>1536x1024px / 2048x1024px</b></li><li>24-bit framebuffer pixel format (12-byte): <b>1024x1024px</b></li></div></div><p>The TouchGFX Generator will automatically generate an address look-up table (LUT) that maps the addresses based on the GFXMMU configurations and LTDC layer settings.</p><p>After enabling the GFXMMU, the number of partial blocks used (or the number of times the partial framebuffer block fits into the display) can be configured in the TouchGFX Generator.</p><div class="figure noshadow"><a href="/4.25/ja/img/development/touchgfx-hal-development/scenarios/number-of-blocks.png" target="_blank"><img width="450" src="/4.25/ja/img/development/touchgfx-hal-development/scenarios/number-of-blocks.png"></a><p></p></div><p>This parameter will directly impact the amount of RAM used for the framebuffer block. The number of blocks must be a power-of-2, e.g., 2, 4, and 8, which results in a framebuffer block of size 1/2, 1/4, and 1/8 of total display size respectively.</p><h3 class="anchor anchorWithStickyNavbar_npWT" id="framebuffer-allocation">Framebuffer allocation<a href="#framebuffer-allocation" class="hash-link" aria-label="Framebuffer allocationに直接リンク" title="Framebuffer allocationに直接リンク">​</a></h3><p>When using <em>Partial Buffer - LTDC driven display</em> framebuffer strategy, the semantics of the <a href="/4.25/ja/docs/development/touchgfx-hal-development/generator-how-to/touchgfx-al-configuration/display">framebuffer allocation strategy</a> are different than usual.</p><p>If choosing <em>by allocation</em>, the TouchGFX Engine will draw directly into the physical partial framebuffer block, while the LTDC reads through the GFXMMU address LUT.</p><p>If choosing <em>by address</em>, only the address of one of the GFXMMU virtual buffers can be specified and the TouchGFX Engine will draw through the virtual buffer of the GFXMMU when rendering, instead of directly into the physical framebuffer block.</p><h4 class="anchor anchorWithStickyNavbar_npWT" id="by-allocation">Buffer Location - By allocation<a href="#by-allocation" class="hash-link" aria-label="Buffer Location - By allocationに直接リンク" title="Buffer Location - By allocationに直接リンク">​</a></h4><p>The recommended framebuffer allocation strategy is <em>by allocation</em>. This allows the TouchGFX Engine to draw directly into the physical partial framebuffer block, while the LTDC reads through the GFXMMU address LUT.</p><h4 class="anchor anchorWithStickyNavbar_npWT" id="by-address">Buffer Location - By address<a href="#by-address" class="hash-link" aria-label="Buffer Location - By addressに直接リンク" title="Buffer Location - By addressに直接リンク">​</a></h4><p>This option is only recommended on some specific platforms with limitations using RGB888 framebuffer format and GPU2D (NeoChrome) to accelerate rendering.</p><p>Some MCU&#x27;s using GPU2D (NeoChrome) to accelerate rendering do not support writing to a 24-bit RGB888 framebuffer. In this case, the GFXMMU is used to <em>pack</em> data that is read/written from a 32-bit ARGB8888 format to the RGB888 format of the physical framebuffer block.</p><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content">MCU&#x27;s with limitations using RGB888 framebuffer format are mentioned in this <a href="/4.25/ja/docs/development/scenarios/touchgfx-on-gpu2d#stm32h7s8-and-stm32n657-limitations-when-using-rgb888-framebuffer-24-bpp">article</a></div></div><p>To enable this, the LTDC Pixel format must be setup to use the ARGB8888 framebuffer format and use one of the virtial buffers of the GFXMMU <code>GFXMMU_VIRTUAL_BUFFERX_BASE</code> as the framebuffer address. It is important to use the same GFXMMU buffer address that configured in the GFXMMU. Configure the GFXMMU to use a <em>Block Size</em> of 12 bytes, and enable <em>Packing</em> for the buffer as shown below:</p><div class="figure noshadow"><a href="/4.25/ja/img/development/touchgfx-hal-development/scenarios/24-bit-gfxmmu.png" target="_blank"><img width="500" src="/4.25/ja/img/development/touchgfx-hal-development/scenarios/24-bit-gfxmmu.png"></a><p></p></div><p>These options will be reflected in the TouchGFX Generator UI:</p><div class="figure noshadow"><a href="/4.25/ja/img/development/touchgfx-hal-development/scenarios/24-bit-partial-ltdc.png" target="_blank"><img width="400" src="/4.25/ja/img/development/touchgfx-hal-development/scenarios/24-bit-partial-ltdc.png"></a><p></p></div><p>The physical 24-bit framebuffer memory region must be defined in the linker script with the correct size (i.e., 3 bytes per pixel) and the start address of this region must be used to configure the physical buffer address of the GFXMMU.</p><div class="highlight highlight-note"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div>Note</h5></div><div class="highlight-content">This configuration will potentially degrade performance, because the TouchGFX Engine will draw through the virtual buffer of the GFXMMU when rendering, instead of directly into the physical framebuffer block.</div></div><h2 class="anchor anchorWithStickyNavbar_npWT" id="supported-framebuffer-strategies">Supported Framebuffer Strategies<a href="#supported-framebuffer-strategies" class="hash-link" aria-label="Supported Framebuffer Strategiesに直接リンク" title="Supported Framebuffer Strategiesに直接リンク">​</a></h2><ul><li>Single</li><li>Double</li><li>Partial - LTDC driven display</li></ul><div class="highlight highlight-further-reading"><div class="highlight-heading"><h5><div class="highlight-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>Further reading</h5></div><div class="highlight-content">See article <a href="/4.25/ja/docs/basic-concepts/framebuffer#framebuffer-strategies">Framebuffer Strategies</a> for a general introduction to framebuffer strategies in TouchGFX.</div></div><h3 class="anchor anchorWithStickyNavbar_npWT" id="single">Single<a href="#single" class="hash-link" aria-label="Singleに直接リンク" title="Singleに直接リンク">​</a></h3><p>Using a LTDC driven display with the single framebuffer strategy, will generate the following code in the HAL to allow the TouchGFX Engine to follow the refresh cycle of the display to optimize the rendering process:</p><div class="code-header"><div><h5>TouchGFXGeneratedHAL.cpp</h5></div></div><div class="language-cpp codeBlockContainer_wdCH theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_NZw4"><pre tabindex="0" class="prism-code language-cpp codeBlock_Q0k3 thin-scrollbar"><code class="codeBlockLines_hUh3"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">uint16_t</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">TouchGFXGeneratedHAL</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">getTFTCurrentLine</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// The CPSR register (bits 15:0) specify current line of TFT controller.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">uint16_t</span><span class="token plain"> curr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">uint16_t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">LTDC</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">CPSR </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> LTDC_CPSR_CYPOS_Msk</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">uint16_t</span><span class="token plain"> backPorchY </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">uint16_t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">LTDC</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">BPCR </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> LTDC_BPCR_AVBP_Msk</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// The semantics of the getTFTCurrentLine() function is to return a value</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// in the range of 0-totalheight. If we are still in back porch area, return 0.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">curr </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain"> backPorchY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">curr </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> backPorchY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup_ibJ8"><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_pv0M" aria-hidden="true"><svg class="copyButtonIcon_nHt1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_HEug" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the LTDC interrupt handler, the LTDC framebuffer address will not be swapped and the TouchGFX Engine is allowed to finish rendering the current frame when the display refresh cycle has exited the <em>active area</em>, which is when the display have read the last line of the framebuffer.</p><h4 class="anchor anchorWithStickyNavbar_npWT" id="reference-implementation">Reference implementation<a href="#reference-implementation" class="hash-link" aria-label="Reference implementationに直接リンク" title="Reference implementationに直接リンク">​</a></h4><p>The <em>TouchGFX Board Setup</em> STM32U5G9J Discovery Kit 2 includes a reference implementation of double framebuffer strategy. Change the framebuffer strategy to single in the TouchGFX Generator and generate code to see an example of using single framebuffer strategy:</p><div class="figure"><a href="/4.25/ja/img/development/touchgfx-hal-development/scenarios/stm32u5g9-dk2.png" target="_blank"><img width="200" src="/4.25/ja/img/development/touchgfx-hal-development/scenarios/stm32u5g9-dk2.png"></a><p></p></div><h3 class="anchor anchorWithStickyNavbar_npWT" id="double">Double<a href="#double" class="hash-link" aria-label="Doubleに直接リンク" title="Doubleに直接リンク">​</a></h3><p>When using an LTDC driven display with the double framebuffer strategy, the LTDC framebuffer address will be swapped to the other framebuffer in the LTDC interrupt handler. This allows the TouchGFX Engine to render the next frame immediately after swapping the LTDC framebuffer address, while the LTDC is reading the current frame from the other framebuffer.</p><h4 class="anchor anchorWithStickyNavbar_npWT" id="reference-implementation-1">Reference implementation<a href="#reference-implementation-1" class="hash-link" aria-label="Reference implementationに直接リンク" title="Reference implementationに直接リンク">​</a></h4><p>The <em>TouchGFX Board Setup</em> STM32U5G9J Discovery Kit 2 includes a reference implementation:</p><div class="figure"><a href="/4.25/ja/img/development/touchgfx-hal-development/scenarios/stm32u5g9-dk2.png" target="_blank"><img width="200" src="/4.25/ja/img/development/touchgfx-hal-development/scenarios/stm32u5g9-dk2.png"></a><p></p></div><h3 class="anchor anchorWithStickyNavbar_npWT" id="partial">Partial - LTDC driven display<a href="#partial" class="hash-link" aria-label="Partial - LTDC driven displayに直接リンク" title="Partial - LTDC driven displayに直接リンク">​</a></h3><p>Using a LTDC driven display with the Partial framebuffer strategy, is similar to using single framebuffer strategy, but the TouchGFX Engine will only render into the partial framebuffer block. Because the same framebuffer block is reused to render all parts of the display, it is important to efficiently manage the rendering process to avoid tearing and missing hard deadlines. To enable this, the TouchGFX Generator will generate the following code in the HAL to allow the TouchGFX Engine to configure LTDC line interrupts to signal the TouchGFX Engine when to render the next part of the display:</p><div class="code-header"><div><h5>TouchGFXGeneratedHAL.cpp</h5></div></div><div class="language-cpp codeBlockContainer_wdCH theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_NZw4"><pre tabindex="0" class="prism-code language-cpp codeBlock_Q0k3 thin-scrollbar"><code class="codeBlockLines_hUh3"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">TouchGFXGeneratedHAL</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">waitForLTDCLines</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">uint16_t</span><span class="token plain"> numberOfLines</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// The CPSR register (bits 15:0) specify current line of TFT controller.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">uint16_t</span><span class="token plain"> curr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> LTDC</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">CPSR </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> LTDC_CPSR_CYPOS_Msk</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// The AWCR register (10:0) specify the accumulated active height.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">uint16_t</span><span class="token plain"> max </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">LTDC</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">AWCR </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> LTDC_AWCR_AAH_Msk</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Calculate the line at which to configure the interrupt.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    curr </span><span class="token operator" style="color:rgb(137, 221, 255)">+=</span><span class="token plain"> numberOfLines</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">curr </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> max</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        curr </span><span class="token operator" style="color:rgb(137, 221, 255)">-=</span><span class="token plain"> max</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Configure line interrupt</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">HAL_LTDC_ProgramLineEvent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">hltdc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> curr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Wait for VSync signal, which fires on the line interrupt that we just configured.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">OSWrappers</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">waitForVSync</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup_ibJ8"><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_pv0M" aria-hidden="true"><svg class="copyButtonIcon_nHt1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_HEug" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The function <code>TouchGFXGeneratedHAL::waitForLTDCLines(uint16_t)</code> is called from the TouchGFX Engine drawing loop. The specific number of line being requested depends on a set of parameters. Depending on the <em>Number Of Partial Blocks</em> that are configured in the TouchGFX Generator, a set of appropriate default values will be assigned to these parameters.</p><p>Because the framebuffer block is reused to render all parts of the display, the <em>VSYNC</em> signal which normally signals the LTDC scanline has left the active area, is used to signal the TouchGFX Engine to start rendering the next part of the display:</p><div class="code-header"><div><h5>TouchGFXGeneratedHAL.cpp</h5></div></div><div class="language-cpp codeBlockContainer_wdCH theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_NZw4"><pre tabindex="0" class="prism-code language-cpp codeBlock_Q0k3 thin-scrollbar"><code class="codeBlockLines_hUh3"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">extern</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;C&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">HAL_LTDC_LineEventCallback</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">LTDC_HandleTypeDef</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> hltdc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token class-name" style="color:rgb(255, 203, 107)">OSWrappers</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">signalVSync</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup_ibJ8"><button type="button" aria-label="コードをクリップボードにコピー" title="コピー" class="clean-btn"><span class="copyButtonIcons_pv0M" aria-hidden="true"><svg class="copyButtonIcon_nHt1" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_HEug" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_npWT" id="reference-implementation-2">Reference implementation<a href="#reference-implementation-2" class="hash-link" aria-label="Reference implementationに直接リンク" title="Reference implementationに直接リンク">​</a></h4><p>The <em>TouchGFX Board Setup</em> STM32H7S78 DK Partial Framebuffer includes a reference implementation:</p><div class="figure"><a href="/4.25/ja/img/development/touchgfx-hal-development/scenarios/stm32h7s78-dk-partial-fb.png" target="_blank"><img width="200" src="/4.25/ja/img/development/touchgfx-hal-development/scenarios/stm32h7s78-dk-partial-fb.png"></a><p></p></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="ドキュメント･ページのナビゲーション"><a class="pagination-nav__link pagination-nav__link--prev" href="/4.25/ja/docs/category/scenarios"><div class="pagination-nav__sublabel">前へ</div><div class="pagination-nav__label">Scenarios</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/4.25/ja/docs/development/touchgfx-hal-development/scenarios/scenarios-dsi-video-mode"><div class="pagination-nav__sublabel">次へ</div><div class="pagination-nav__label">MIPI-DSIビデオ･モード</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_SRp5 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a><ul><li><a href="#parameter-and-layer-configuration" class="table-of-contents__link toc-highlight">Parameter and Layer Configuration</a></li><li><a href="#touchgfx-driver--vsync-signal" class="table-of-contents__link toc-highlight">TouchGFXドライバ / VSYNC信号</a></li><li><a href="#ltdc-frame-buffer-address-configuration" class="table-of-contents__link toc-highlight">LTDC Frame Buffer address configuration</a></li><li><a href="#gfxmmu" class="table-of-contents__link toc-highlight">GFXMMU configuration</a></li><li><a href="#framebuffer-allocation" class="table-of-contents__link toc-highlight">Framebuffer allocation</a></li></ul></li><li><a href="#supported-framebuffer-strategies" class="table-of-contents__link toc-highlight">Supported Framebuffer Strategies</a><ul><li><a href="#single" class="table-of-contents__link toc-highlight">Single</a></li><li><a href="#double" class="table-of-contents__link toc-highlight">Double</a></li><li><a href="#partial" class="table-of-contents__link toc-highlight">Partial - LTDC driven display</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">All rights reserved © 2024 STMicroelectronics | <a href="https://www.st.com/content/st_com/ja/common/terms-of-use.html">ご利用条件</a> | <a href="https://www.st.com/content/st_com/ja/common/privacy-policy.html">プライバシー･ポリシー</a> | <a href="/docs/miscellaneous/cookie-policy">Cookieポリシー</a> | <a href="https://app-de.onetrust.com/app/#/webform/2b87200d-4023-4588-9df7-ab0cdea1a67e">権利行使</a></div></div></div></footer></div></div>
<script src="/4.25/ja/assets/js/runtime~main.524fbfbc.js"></script>
<script src="/4.25/ja/assets/js/main.a46b416f.js"></script>
</body>
</html>